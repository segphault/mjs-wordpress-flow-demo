montageDefine("3cbcb4a","ui/flow.reel/flow",{dependencies:["../../core/core","../component","frb/observers","./flow-bezier-spline","../../core/range-controller","../../core/deprecate"],factory:function(e,t){var n=(e("../../core/core").Montage,e("../component").Component),i=e("frb/observers").observeProperty,r=e("./flow-bezier-spline").FlowBezierSpline,a=e("../../core/range-controller").RangeController,s=e("../../core/deprecate").deprecationWarning;t.Flow=n.specialize({constructor:{value:function(){this.super(),this._visibleIndexes=[],this._slideOffsets={},this.defineBinding("_numberOfIterations",{"<-":"_frustumController.content.length"}),this.addOwnPropertyChangeListener("_numberOfIterations",this),window.addEventListener("resize",this,!1)}},slotContent:{serializable:!0,value:null},__flowTranslateComposer:{value:null},_flowTranslateComposer:{get:function(){return this.__flowTranslateComposer},set:function(e){this.__flowTranslateComposer&&(this.__flowTranslateComposer.removeEventListener("translateStart",this,!1),this.__flowTranslateComposer.removeEventListener("translateEnd",this,!1)),this.__flowTranslateComposer=e,this.__flowTranslateComposer.addEventListener("translateStart",this,!1),this.__flowTranslateComposer.addEventListener("translateEnd",this,!1)}},handleTranslateStart:{value:function(){this.callDelegateMethod("didTranslateStart",this)}},handleTranslateEnd:{value:function(){this.callDelegateMethod("didTranslateEnd",this)}},_scrollingMode:{value:"linear"},_transform:{value:null},_transformCss:{value:null},_perspective:{value:null},scrollingMode:{serializable:!0,get:function(){return this._scrollingMode},set:function(e){switch(e){case"linear":case"drag":this._scrollingMode=e}}},_linearScrollingVector:{value:[-300,0]},linearScrollingVector:{seriazable:!0,get:function(){return this._linearScrollingVector},set:function(e){this._linearScrollingVector=e}},_repetition:{value:null},momentumDuration:{serializable:!0,value:650},_splinePaths:{value:null},splinePaths:{enumerable:!1,get:function(){return this._splinePaths||(this._splinePaths=[]),this._splinePaths},set:function(e){this._splinePaths=e}},_appendPath:{value:function(e){var t,n,i=new r,a=e.knots,s=e.knots.length,o=[],l=[],c=[],u=[];i.parameters={};for(t in e.units)i.parameters[t]={data:[],units:e.units[t]};for(t=0;s>t;t++){o[t]=a[t].knotPosition,c[t]=a[t].previousHandlerPosition,l[t]=a[t].nextHandlerPosition,u[t]=a[t].previousDensity;for(n in e.units)i.parameters[n].data.push(a[t][n])}i.knots=o,i.previousHandlers=c,i.nextHandlers=l,i.densities=u,i._computeDensitySummation(),this.splinePaths.push(i),e.hasOwnProperty("headOffset")||(e.headOffset=0),e.hasOwnProperty("tailOffset")||(e.tailOffset=0),this._paths.push(e),this._updateLength()}},_paths:{value:null},paths:{get:function(){var e,t,n,i,r,a,s,o=this.splinePaths.length,l=[];for(r=0;o>r;r++){for(t=this.splinePaths[r].knots.length,e={knots:[],units:{}},a=0;t>a;a++)i={knotPosition:this.splinePaths[r].knots[a]},this.splinePaths[r].nextHandlers&&this.splinePaths[r].nextHandlers[a]&&(i.nextHandlerPosition=this.splinePaths[r].nextHandlers[a]),this.splinePaths[r].previousHandlers&&this.splinePaths[r].previousHandlers[a]&&(i.previousHandlerPosition=this.splinePaths[r].previousHandlers[a]),this.splinePaths[r].densities&&this.splinePaths[r].densities[a]&&(i.previousDensity=this.splinePaths[r].densities[a],i.nextDensity=this.splinePaths[r].densities[a]),e.knots.push(i);for(a in this.splinePaths[r].parameters)for(e.units[a]=this.splinePaths[r].parameters[a].units,n=this.splinePaths[r].parameters[a].data.length,s=0;n>s;s++)e.knots[s][a]=this.splinePaths[r].parameters[a].data[s];e.headOffset=this._paths[r].hasOwnProperty("headOffset")?this._paths[r].headOffset:0,e.tailOffset=this._paths[r].hasOwnProperty("tailOffset")?this._paths[r].tailOffset:0,l.push(e)}return l},set:function(e){var t,n=e.length;for(this._splinePaths=[],this._paths=[],t=0;n>t;t++)this._appendPath(e[t]);this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_cameraElement:{value:null},_cameraPosition:{value:[0,0,800]},cameraPosition:{get:function(){return this._cameraPosition},set:function(e){this._cameraPosition=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_cameraTargetPoint:{value:[0,0,0]},cameraTargetPoint:{get:function(){return this._cameraTargetPoint},set:function(e){this._cameraTargetPoint=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_cameraFov:{value:50},cameraFov:{get:function(){return this._cameraFov},set:function(e){this._cameraFov=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_cameraRoll:{value:0},cameraRoll:{get:function(){return this._cameraRoll},set:function(e){this._cameraRoll=e,this._isCameraUpdated=!0,this.needsDraw=!0,this._needsComputeVisibleRange=!0}},_stride:{value:0},stride:{get:function(){return this._stride},set:function(e){this._stride=e}},_scrollingTransitionDurationMiliseconds:{value:500},_scrollingTransitionDuration:{value:"500ms"},scrollingTransitionDuration:{get:function(){return this._scrollingTransitionDuration},set:function(e){var t,n,i=e+"";i.length,(n=/^(\d+)ms$/.exec(i))?t=+n[1]:(n=/^(\d+)s$/.exec(i))?t=1e3*+n[1]:(t=+i,i+="ms"),isNaN(t)||this._scrollingTransitionDurationMiliseconds===t||(this._scrollingTransitionDurationMiliseconds=t,this._scrollingTransitionDuration=i)}},hasSelectedIndexScrolling:{value:!1},selectedIndexScrollingOffset:{value:0},_handleSelectedIndexesChange:{value:function(e){this.hasSelectedIndexScrolling&&e[0]&&this.startScrollingIndexToOffset(Math.floor(this.contentController.content.indexOf(e[0].object)/this._paths.length),this.selectedIndexScrollingOffset)}},_timingFunctions:{value:{ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]}},_scrollingTransitionTimingFunctionBezier:{value:[.25,.1,.25,1]},_scrollingTransitionTimingFunction:{value:"ease"},scrollingTransitionTimingFunction:{get:function(){return this._scrollingTransitionTimingFunction},set:function(e){var t,n,i=e+"";if(this._timingFunctions.hasOwnProperty(i))this._scrollingTransitionTimingFunction=i,this._scrollingTransitionTimingFunctionBezier=this._timingFunctions[i];else if("cubic-bezier("===i.substr(0,13)&&")"===i.substr(i.length-1,1)&&(t=i.substr(13,i.length-14).split(","),4===t.length)){for(n=0;4>n;n++)if(t[n]-=0,isNaN(t[n]))return;0>t[0]?t[0]=0:t[0]>1&&(t[0]=1),0>t[2]?t[2]=0:t[2]>1&&(t[2]=1),this._scrollingTransitionTimingFunction="cubic-bezier("+t+")",this._scrollingTransitionTimingFunctionBezier=t}}},_computeCssCubicBezierValue:{value:function(e,t){var n,i,r,a=.5,s=.25;for(r=0;20>r;r++)n=a*a,i=1-a,3*(i*i*a*t[0]+i*n*t[2])+n*a>e?a-=s:a+=s,s*=.5;return n=a*a,i=1-a,3*(i*i*a*t[1]+i*n*t[3])+n*a}},_isTransitioningScroll:{value:!1},stopScrolling:{value:function(){this._isTransitioningScroll=!1}},startScrollingIndexToOffset:{value:function(e,t){this._scrollingOrigin=this.scroll,this._scrollingDestination=e-t,this._scrollingDestination>this._length?this._scrollingDestination=this._length:0>this._scrollingDestination&&(this._scrollingDestination=0),this._isScrolling=!0,this._scrollingStartTime=Date.now(),this._isTransitioningScroll=!0,this.needsDraw=!0,this.callDelegateMethod("didTranslateStart",this)}},_isCameraUpdated:{value:!0},_width:{value:null},_height:{value:null},_boundingBoxSize:{value:[200,200,0]},boundingBoxSize:{serializable:!0,get:function(){return this._boundingBoxSize},set:function(e){this._boundingBoxSize=e,this.elementsBoundingSphereRadius=.5*Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),this._needsComputeVisibleRange=!0}},_elementsBoundingSphereRadius:{value:283},elementsBoundingSphereRadius:{get:function(){return this._elementsBoundingSphereRadius},set:function(e){this._elementsBoundingSphereRadius!==e&&(this._elementsBoundingSphereRadius=e,this.needsDraw=!0,this._needsComputeVisibleRange=!0)}},_halfPI:{value:.5*Math.PI},_doublePI:{value:2*Math.PI},_computeFrustumNormals:{value:function(){var e,t,n,i,r,a,s,o,l,c=.5*this.cameraFov*this._doublePI/360,u=Math.sin(c),h=Math.cos(c),d=u*this._width/this._height,p=this.cameraTargetPoint[0]-this.cameraPosition[0],f=this.cameraTargetPoint[1]-this.cameraPosition[1],m=this.cameraTargetPoint[2]-this.cameraPosition[2],g=this._halfPI-Math.atan2(m,p),v=p*Math.sin(g)+m*Math.cos(g),_=this._halfPI-Math.atan2(v,f),b=[[h,0,d],[-h,0,d],[0,h,u],[0,-h,u]],y=[];for(l=0;4>l;l++)o=b[l],e=o[0],t=o[1]*Math.cos(-_)-o[2]*Math.sin(-_),n=o[1]*Math.sin(-_)+o[2]*Math.cos(-_),i=e*Math.cos(-g)-n*Math.sin(-g),r=t,a=e*Math.sin(-g)+n*Math.cos(-g),s=1/Math.sqrt(i*i+r*r+a*a),y.push([i*s,r*s,a*s]);return y}},_segmentsIntersection:{value:function(e,t){for(var n,i,r=0,a=0,s=[];e.length>r&&t.length>a;)e[r][0]>=t[a][1]?a++:e[r][1]<=t[a][0]?r++:(n=e[r][0]>=t[a][0]?e[r][0]:t[a][0],i=e[r][1]<=t[a][1]?e[r][1]:t[a][1],s.push([n,i]),e[r][1]<t[a][1]?r++:e[r][1]>t[a][1]?a++:(r++,a++));return s}},_computeVisibleRange:{value:function(e){var t,n,i,r,a=e._knots.length-1,s=this._cameraPosition[0],o=this._cameraPosition[1],l=this._cameraPosition[2],c=this._computeFrustumNormals(),u=[],h=[],d=[],p=this._elementsBoundingSphereRadius,f=e._knots,m=e._nextHandlers,g=e._previousHandlers,v=[],_=[];for(i=0;a>i;i++)if(t=c[0],u=e.directedPlaneBezierIntersection(s-t[0]*p,o-t[1]*p,l-t[2]*p,c[0],f[i],m[i],g[i+1],f[i+1],v),u.length&&(t=c[1],h=e.directedPlaneBezierIntersection(s-t[0]*p,o-t[1]*p,l-t[2]*p,c[1],f[i],m[i],g[i+1],f[i+1],v),h.length&&(n=this._segmentsIntersection(u,h),n.length&&(t=c[2],u=e.directedPlaneBezierIntersection(s-t[0]*p,o-t[1]*p,l-t[2]*p,c[2],f[i],m[i],g[i+1],f[i+1],v),n=this._segmentsIntersection(u,n),n.length))))for(t=c[3],u=e.directedPlaneBezierIntersection(s-t[0]*p,o-t[1]*p,l-t[2]*p,c[3],f[i],m[i],g[i+1],f[i+1],v),n=this._segmentsIntersection(u,n),r=0;n.length>r;r++)d.push([i,n[r][0],n[r][1]]);var b,y,C,w,L,x,M,E=e._densities;for(i=0;d.length>i;i++)b=E[d[i][0]],y=E[d[i][0]+1],C=d[i][0]?e._densitySummation[d[i][0]-1]:0,w=d[i][1],L=d[i][2],x=.5*(y-b)*w*w+w*b+C,M=.5*(y-b)*L*L+L*b+C,_.push([x,M]);return _}},_determineCssPrefixedProperties:{value:function(){"webkitTransform"in this.element.style?(this._transform="webkitTransform",this._transformCss="-webkit-transform",this._perspective="webkitPerspective"):"MozTransform"in this.element.style?(this._transform="MozTransform",this._transformCss="-moz-transform",this._perspective="MozPerspective"):"msTransform"in this.element.style?(this._transform="msTransform",this._transformCss="-ms-transform",this._perspective="msPerspective"):(this._transform="transform",this._perspective="perspective")}},_isListeningToResize:{value:!0},isListeningToResize:{get:function(){return this._isListeningToResize},set:function(e){var t=!!e;this._isListeningToResize!==t&&(this._isListeningToResize=t,this._isListeningToResize?window.addEventListener("resize",this,!1):window.removeEventListener("resize",this,!1))}},handleResize:{value:function(){this._isCameraUpdated=!0,this.needsDraw=!0}},enterDocument:{value:function(e){e&&(this._determineCssPrefixedProperties(),this._repetition.addRangeAtPathChangeListener("selectedIterations",this,"_handleSelectedIndexesChange"))}},_updateVisibleIndexes:{value:function(e,t){var n,i,r=this._visibleIndexes,a=r&&!isNaN(r.length)?r.length:0,s=[];for(i=0;a>i;i++)"number"==typeof t[r[i]]?e[t[r[i]]]=null:s.push(i);for(i=n=0;s.length>n&&e.length>i;i++)null!==e[i]&&(r.set(s[n],e[i]),n++);for(n=a;e.length>i;i++)null!==e[i]&&(r.set(n,e[i]),n++)}},_needsComputeVisibleRange:{value:!0},_previousVisibleRanges:{value:null},willDraw:{value:function(e){var t,n,i,r,a,s,o,l,c,u,h,d=[],p={},f=this._paths,m=f.length,g=this.splinePaths;this._isTransitioningScroll&&(u=(Date.now()-this._scrollingStartTime)/this._scrollingTransitionDurationMiliseconds,h=this._computeCssCubicBezierValue(u,this._scrollingTransitionTimingFunctionBezier),1>u?this.scroll=this._scrollingOrigin+(this._scrollingDestination-this._scrollingOrigin)*h:(this.scroll=this._scrollingDestination,this._isTransitioningScroll=!1,this._needsToCallDidTranslateEndDelegate=!0));var v,_,b,y,C,u=e,c=6,w=this.lastDrawTime?.018*(u-this.lastDrawTime)*this._elasticScrollingSpeed:0,L=1-w/c,x=this._minSlideOffsetIndex,M=this._maxSlideOffsetIndex;if(this.lastDrawTime=u,this._hasElasticScrolling)for(r=0;c>r;r++){for(i=this._draggedSlideIndex-1;i>=x;i--)v=this._getSlideOffset(i),_=this._getSlideOffset(i+1),b=(v-_)*L+_,b>0&&(b=0),this._updateSlideOffset(i,b);for(i=this._draggedSlideIndex+1;M>=i;i++)v=this._getSlideOffset(i),_=this._getSlideOffset(i-1),b=(v-_)*L+_,0>b&&(b=0),this._updateSlideOffset(i,b)}if(this._width=this._element.clientWidth,this._height=this._element.clientHeight,g.length){for(o=this._numberOfIterations%m,l=(this._numberOfIterations-o)/m,this._needsComputeVisibleRange&&(this._previousVisibleRanges=[]),a=0;m>a;a++)for(c=l+(o>a?1:0),this._needsComputeVisibleRange?(t=this._computeVisibleRange(g[a]),this._previousVisibleRanges[a]=t,g[a]._computeDensitySummation()):t=this._previousVisibleRanges[a],s=this._scroll-f[a].headOffset,i=0;t.length>i;i++){for(C=c/2,r=C;C>=1;)n=(0|r)*m+a,y=(0|r)+this._getSlideOffset(n)-s,C/=2,y>=t[i][0]?r-=C:r+=C;r=0|r-1,0>r&&(r=0);do n=r*m+a,y=r+this._getSlideOffset(n)-s,y>=t[i][0]&&t[i][1]>=y&&void 0===p[n]&&(p[n]=d.length,d.push(n)),r++;while(t[i][1]>=y&&c>r)}this._needsComputeVisibleRange=!1}this._updateVisibleIndexes(d,p)}},draw:{value:function(){var e,t,n,i,r,a,s,o,l,c,u=this._repetition._drawnIterations.length,h=(this._paths.length,this._visibleIndexes);if(this._isTransitioningScroll&&(this.needsDraw=!0),this._isCameraUpdated){var d,p,f=.5*Math.tan((90-.5*this.cameraFov)*this._doublePI/360)*this._height,m=this.cameraTargetPoint[0]-this.cameraPosition[0],g=this.cameraTargetPoint[1]-this.cameraPosition[1],v=this.cameraTargetPoint[2]-this.cameraPosition[2],_=Math.atan2(-m,-v);d=m*-Math.sin(-_)+v*Math.cos(-_),p=Math.atan2(-g,-d),this._element.style[this._perspective]=f+"px",this._cameraElement.style[this._transform]="translate3d(0,0,"+f+"px)rotateX("+p+"rad)rotateY("+-_+"rad)"+"translate3d("+-this.cameraPosition[0]+"px,"+-this.cameraPosition[1]+"px,"+-this.cameraPosition[2]+"px)",this._isCameraUpdated=!1}if(this.splinePaths.length)for(e=0;u>e;e++)c=this.offset(h[e]),a=c.pathIndex,t=c.slideTime,o=this._splinePaths[a]._convertSplineTimeToBezierIndexTime(t),i=this._repetition._drawnIterations[e],r=i.cachedFirstElement||i.firstElement,null!==o?(r.children[0]&&(r.classList.contains("selected")?r.children[0].classList.add("selected"):r.children[0].classList.remove("selected"),r.classList.contains("active")?r.children[0].classList.add("active"):r.children[0].classList.remove("active")),s=this._splinePaths[a].getPositionAtIndexTime(o),l=this._splinePaths[a].getRotationAtIndexTime(o),n=this._transformCss+":translate3d("+1e-5*(1e5*s[0]>>0)+"px,"+1e-5*(1e5*s[1]>>0)+"px,"+1e-5*(1e5*s[2]>>0)+"px)"+(l[2]?"rotateZ("+1e-5*(1e5*l[2]>>0)+"rad)":"")+(l[1]?"rotateY("+1e-5*(1e5*l[1]>>0)+"rad)":"")+(l[0]?"rotateX("+1e-5*(1e5*l[0]>>0)+"rad)":"")+";"+this._splinePaths[a].getStyleAtIndexTime(o),r.setAttribute("style",n)):r.setAttribute("style",this._transformCss+":scale3d(0,0,0);opacity:0");else for(e=0;u>e;e++)i=this._repetition._drawnIterations[e],r=i.cachedFirstElement||i.firstElement,r.setAttribute("style",this._transformCss+":scale3d(0,0,0);opacity:0");this._slideOffsetsLength&&(this.needsDraw=!0),this._needsToCallDidTranslateEndDelegate&&(this._needsToCallDidTranslateEndDelegate=!1,this.callDelegateMethod("didTranslateEnd",this))}},_updateLength:{value:function(){if(this._paths){var e,t,n,i,r,a,s=this._paths.length,o=0;if(s>0){for(r=this._numberOfIterations%s,i=(this._numberOfIterations-r)/s,a=0;s>a;a++)e=this._paths[a],t=i+(r>a?1:0),n=t-e.tailOffset+e.headOffset-1,n>o&&(o=n);this.length=o}this.needsDraw=!0}}},_numberOfIterations:{value:0},handle_numberOfIterationsChange:{value:function(){this._updateLength()}},content:{get:function(){return this.getPath("contentController.content")},set:function(e){this.contentController=(new a).initWithContent(e)}},contentController:{value:null},isSelectionEnabled:{value:null},selectedIndexes:{serializable:!1,value:null},activeIndexes:{serializable:!1,value:null},observeProperty:{value:function(e,t,n){return"currentIteration"!==e&&"objectAtCurrentIteration"!==e&&"contentAtCurrentIteration"!==e?i(this,e,t,n):(s(e,":iteration.object"),this._repetition?this._repetition.observeProperty(e,t,n):void 0)}},templateDidLoad:{value:function(){var e=this;this._repetition.willDraw=function(){e.needsDraw=!0}}},_length:{value:0},length:{get:function(){return this._length},set:function(e){this._length=0>e?0:e}},_scroll:{value:0},_elasticScrollingRange:{value:20},_hasElasticScrolling:{value:!1},hasElasticScrolling:{get:function(){return this._hasElasticScrolling},set:function(e){this._hasElasticScrolling=e?!0:!1}},_slideOffsets:{value:null},_slideOffsetsLength:{value:0},_maxSlideOffsetIndex:{value:-1},_minSlideOffsetIndex:{value:2e9},_updateSlideOffset:{value:function(e,t){var n=1e-4;e>=0&&(-n>t||t>n?(void 0===this._slideOffsets[e]&&(this._slideOffsetsLength++,this._minSlideOffsetIndex>e&&(this._minSlideOffsetIndex=e),e>this._maxSlideOffsetIndex&&(this._maxSlideOffsetIndex=e)),this._slideOffsets[e]=t):this._removeSlideOffset(e))}},_incrementSlideOffset:{value:function(e,t){this._updateSlideOffset(e,this._getSlideOffset(e)+t)}},_removeSlideOffset:{value:function(e){if(void 0!==this._slideOffsets[e]){var t,n,i;if(delete this._slideOffsets[e],this._slideOffsetsLength--,e===this._minSlideOffsetIndex)for(t=Object.keys(this._slideOffsets),this._minSlideOffsetIndex=2e9,n=0;t.length>n;n++)i=0|t[n],this._minSlideOffsetIndex>i&&(this._minSlideOffsetIndex=i);if(e===this._maxSlideOffsetIndex)for(void 0===t&&(t=Object.keys(this._slideOffsets)),this._maxSlideOffsetIndex=-1,n=0;t.length>n;n++)i=0|t[n],i>this._maxSlideOffsetIndex&&(this._maxSlideOffsetIndex=i)}}},_getSlideOffset:{value:function(e){return this._minSlideOffsetIndex>e?e=this._minSlideOffsetIndex>this._draggedSlideIndex?this._draggedSlideIndex:this._minSlideOffsetIndex:e>this._maxSlideOffsetIndex&&(e=this._maxSlideOffsetIndex<this._draggedSlideIndex?this._draggedSlideIndex:this._maxSlideOffsetIndex),void 0!==this._slideOffsets[e]?this._slideOffsets[e]:0}},scroll:{get:function(){return this._scroll},set:function(e){if(0>e&&(e=0),e>this.length&&(e=this.length),this._hasElasticScrolling&&null!==this._draggedSlideIndex){var t,n,i=this._draggedSlideIndex-this._elasticScrollingRange,r=this._draggedSlideIndex+this._elasticScrollingRange;for(i>this._minSlideOffsetIndex&&(i=this._minSlideOffsetIndex),this._maxSlideOffsetIndex>r&&(r=this._maxSlideOffsetIndex),n=e-this._scroll,0>i&&(i=0),t=i;r>=t;t++)t!==this._draggedSlideIndex?this._incrementSlideOffset(t,n):this._removeSlideOffset(t);this._scroll=e}else this._scroll=e;this.needsDraw=!0}},previousStride:{value:function(){var e=Math.round(this.scroll/this.stride),t=(e-1)*this.stride;this.startScrollingIndexToOffset(0,-t)}},nextStride:{value:function(){var e=Math.round(this.scroll/this.stride),t=(e+1)*this.stride;this.startScrollingIndexToOffset(0,-t)}},_isInputEnabled:{value:!0},isInputEnabled:{get:function(){return this._isInputEnabled},set:function(e){this._isInputEnabled=e?!0:!1}},_draggedSlideIndex:{value:0},draggedSlideIndex:{get:function(){return this._draggedSlideIndex},set:function(e){if(e!==this._draggedSlideIndex){if(null!==e){var t,n=this._getSlideOffset(e),i=this._minSlideOffsetIndex,r=this._maxSlideOffsetIndex;for(this._incrementSlideOffset(this._draggedSlideIndex,-n),t=i;r>=t;t++)t!==this._draggedSlideIndex&&this._incrementSlideOffset(t,-n);this._removeSlideOffset(e),this._scroll-=n,this._flowTranslateComposer._scroll=this._scroll}this._draggedSlideIndex=e,this.needsDraw=!0}}},_elasticScrollingSpeed:{value:1},elasticScrollingSpeed:{get:function(){return this._elasticScrollingSpeed},set:function(e){this._elasticScrollingSpeed=parseFloat(e)}},lastDrawTime:{value:null},offset:{enumerable:!1,value:function(e){var t=this._paths.length,n=e%t,i=Math.floor(e/t)-this._scroll+this._paths[n].headOffset;return{pathIndex:n,slideTime:i+this._getSlideOffset(e)}}},serializeSelf:{value:function(e){e.setAllProperties();for(var t,n=this.originalContent,i=0;t=n[i];i++)t.component&&e.addObject(t.component)}}})}}),montageDefine("3cbcb4a","ui/flow.reel/flow-translate-composer",{dependencies:["../../core/core","../../composer/translate-composer","../../core/event/event-manager","../../core/geometry/point","../../core/dom"],factory:function(e,t){var n=(e("../../core/core").Montage,e("../../composer/translate-composer").TranslateComposer),i=(e("../../core/event/event-manager").defaultEventManager,e("../../core/geometry/point").Point),r=e("../../core/dom").convertPointFromPageToNode;t.FlowTranslateComposer=n.specialize({constructor:{value:function(){this.super(),this.handleMousewheel=this.handleWheel}},stealChildrenPointer:{value:!0},_scrollingMode:{value:"linear"},scrollingMode:{get:function(){return this._scrollingMode},set:function(e){switch(e){case"linear":case"drag":this._scrollingMode=e}}},_linearScrollingVector:{value:[-300,0]},linearScrollingVector:{get:function(){return this._linearScrollingVector},set:function(e){this._linearScrollingVector=e}},_startPageX:{value:null},_startPageY:{value:null},_pageX:{value:null},_pageY:{value:null},_pointerStartX:{value:null},_pointerStartY:{value:null},_contentOffsetX:{value:null},_contentOffsetY:{value:null},_start:{value:function(e,t){n._start.apply(this,arguments);var a=window.getComputedStyle(this._element,null),s=this.convertCssPixelsPropertyStringToNumber(a.getPropertyValue("border-left-width")),o=this.convertCssPixelsPropertyStringToNumber(a.getPropertyValue("border-top-width")),l=this.convertCssPixelsPropertyStringToNumber(a.getPropertyValue("padding-left")),c=this.convertCssPixelsPropertyStringToNumber(a.getPropertyValue("padding-top")),u=r(this._element,(new i).init(e,t));this._pointerStartX=this._pointerX=u.x-s-l,this._pointerStartY=this._pointerY=u.y-o-c,this._contentOffsetX=this._startPageX-this._pointerStartX,this._contentOffsetY=this._startPageY-this._pointerStartY,this._computePointedElement(),this._startPageX=this._pageX=e,this._startPageY=this._pageY=t,this._startScroll=this._scroll,this._previousScrollDelta=0,this._scrollEnd=null}},_analyzeMovement:{value:function(e){var t,n,i,r=e.velocity;r&&(t=r.speed,t>=this.startTranslateSpeed?this._stealPointer():(n=this.startPageX-e.pageX,i=this.startPageY-e.pageY,n*n+i*i>this.startTranslateRadius*this.startTranslateRadius&&this._stealPointer()))}},_dispatchTranslateStart:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateStart",!0,!0,null),e.scroll=this._scroll,e.translateX=0,e.translateY=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslateEnd:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateEnd",!0,!0,null),e.scroll=this._scroll,e.translateX=0,e.translateY=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslateCancel:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateCancel",!0,!0,null),e.scroll=this._scroll,e.translateX=0,e.translateY=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_dispatchTranslate:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translate",!0,!0,null),e.scroll=this._scroll,e.translateX=0,e.translateY=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},_move:{value:function(e,t){this._isFirstMove&&(this._dispatchTranslateStart(),this._isFirstMove=!1),this._pageX=e,this._pageY=t,"drag"===this._scrollingMode?(this._pointerX=e-this._contentOffsetX,this._pointerY=t-this._contentOffsetY,this._updateDragScroll()):this._updateLinearScroll(),null!==this._closerIndex,this._shouldDispatchTranslate&&this._dispatchTranslate()}},_end:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&(this.startTime=Date.now(),this.endX=this.startX=this._pageX,this.endY=this.startY=this._pageY,this._hasMomentum&&(e.velocity.speed>40||this.translateStrideX||this.translateStrideY)?(this.momentumX="vertical"!=this._axis?e.velocity.x*this._pointerSpeedMultiplier*(this._invertXAxis?1:-1):0,this.momentumY="horizontal"!=this._axis?e.velocity.y*this._pointerSpeedMultiplier*(this._invertYAxis?1:-1):0,this.endX=this.startX+this.momentumX*this.__momentumDuration/2e3,this.endY=this.startY+this.momentumY*this.__momentumDuration/2e3,this.startStrideXTime=null,this.startStrideYTime=null,this.animateMomentum=!0):this.animateMomentum=!1,this.animateMomentum?this._animationInterval():this._isFirstMove||this._dispatchTranslateEnd()),this._releaseInterest()}},_translateEndTimeout:{value:null},_mousewheelStrideTimeout:{value:null},_previousDeltaY:{value:0},handleWheel:{value:function(e){var t=this;if(this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this.component)){var n=this._pageY,i=e.wheelDeltaY||-e.deltaY||0;this.translateStrideX?(window.clearTimeout(this._mousewheelStrideTimeout),(null===this._mousewheelStrideTimeout||Math.abs(i)>Math.abs(this._previousDeltaY*(null===this._mousewheelStrideTimeout?2:4)))&&(i>1?this.callDelegateMethod("previousStride",this):-1>i&&this.callDelegateMethod("nextStride",this)),this._mousewheelStrideTimeout=window.setTimeout(function(){t._mousewheelStrideTimeout=null,t._previousDeltaY=0},70),t._previousDeltaY=i,this._shouldPreventDefault(e)&&e.preventDefault()):(null===this._translateEndTimeout&&this._dispatchTranslateStart(),this._pageY=this._pageY+20*i/100,this._updateScroll(),this._dispatchTranslate(),window.clearTimeout(this._translateEndTimeout),this._translateEndTimeout=window.setTimeout(function(){t._dispatchTranslateEnd(),t._translateEndTimeout=null},400),n!==this._pageY&&this._shouldPreventDefault(e)&&e.preventDefault()),this.eventManager.forfeitPointer(this._WHEEL_POINTER,this.component)}}},_scroll:{value:0},scroll:{get:function(){return this._scroll},set:function(e){null!==this.minScroll&&this.minScroll>e&&(e=this.minScroll),null!==this.maxScroll&&e>this.maxScroll&&(e=this.maxScroll),this._scroll=e}},minScroll:{value:null},maxScroll:{value:null},_flow:{value:null},flow:{get:function(){return this._flow},set:function(e){this._flow=e,this.component=e}},_updateScroll:{value:function(){"linear"===this._scrollingMode?this._updateLinearScroll():this._updateDragScroll()}},_updateLinearScroll:{value:function(){var e=500/this._flow._height,t=(this._pageX-this._startPageX)*this._linearScrollingVector[0]*e,n=(this._pageY-this._startPageY)*this._linearScrollingVector[1]*e,i=this._linearScrollingVector[0]*this._linearScrollingVector[0]+this._linearScrollingVector[1]*this._linearScrollingVector[1],r=(t+n)/i;this.scroll+=r-this._previousScrollDelta,this._previousScrollDelta=r}},_updateDragScroll:{value:function(){var e=(this._pointerX-this._pointerStartX)*this._lineVectorX,t=(this._pointerY-this._pointerStartY)*this._lineVectorY,n=this._lineVectorX*this._lineVectorX+this._lineVectorY*this._lineVectorY,i=(e+t)/n;this.scroll+=i-this._previousScrollDelta,this._previousScrollDelta=i;var r,a,s,o,l,c,u,h,d,p,f,m,g,v,_,b,y,C,w,L,x=this._flow,M=x._cameraPosition,E=x._splinePaths,S=E.length,z=this._closerIndex%S,T=this.flow._splinePaths[z],O=Math.floor(this._closerIndex/S)-this._scroll+this._flow._paths[z].headOffset,P=null,D=null,k=0,A=.5*this._element.clientWidth,j=.5*this._element.clientHeight,e=A-this._pointerX,t=j-this._pointerY,B=x.cameraTargetPoint[0]-M[0],I=x.cameraTargetPoint[1]-M[1],R=x.cameraTargetPoint[2]-M[2],N=-Math.atan2(B,R),q=this._pointerIntersectionPosition;f=R*Math.cos(N)-B*Math.sin(N),m=-Math.atan2(I,f),b=Math.sin(N),y=Math.cos(N),C=Math.sin(m),w=Math.cos(m),v=j/Math.tan(.008726646259972*x.cameraFov),L=0,u=1e100;do p=T._convertSplineTimeToBezierIndexTime(O+L),null!==p&&(r=T.getPositionAtIndexTime(p),rotation=E[z].getRotationAtIndexTime(p),g=this._rotateXYZ(q,rotation),a=(M[2]-r[2]-g[2])*b-(r[0]-M[0]+g[0])*y,s=r[1]-M[1]+g[1],o=(r[2]-M[2]+g[2])*y-(r[0]-M[0]+g[0])*b,l=o*C+s*w,c=o*w-s*C,_=v/c,a=e+a*_,s=t+l*_,d=a*a+s*s,u>d&&(u=d,P=L)),L-=.025;while(L>-6);P+.025>0&&(P=-.025),L=P+.025,u=1e100;do p=T._convertSplineTimeToBezierIndexTime(O+L),null!==p&&(r=T.getPositionAtIndexTime(p),rotation=E[z].getRotationAtIndexTime(p),g=this._rotateXYZ(q,rotation),a=(M[2]-r[2]-g[2])*b-(r[0]-M[0]+g[0])*y,s=r[1]-M[1]+g[1],o=(r[2]-M[2]+g[2])*y-(r[0]-M[0]+g[0])*b,l=o*C+s*w,c=o*w-s*C,_=v/c,a=e+a*_,s=t+l*_,d=a*a+s*s,u>d&&(u=d,P=L)),L-=2e-4;while(L>P-.05);L=0,h=1e100;do p=T._convertSplineTimeToBezierIndexTime(O+L),null!==p&&(r=T.getPositionAtIndexTime(p),rotation=E[z].getRotationAtIndexTime(p),g=this._rotateXYZ(q,rotation),a=(M[2]-r[2]-g[2])*b-(r[0]-M[0]+g[0])*y,s=r[1]-M[1]+g[1],o=(r[2]-M[2]+g[2])*y-(r[0]-M[0]+g[0])*b,l=o*C+s*w,c=o*w-s*C,_=v/c,a=e+a*_,s=t+l*_,d=a*a+s*s,h>d&&(h=d,D=L)),L+=.025;while(6>L);0>D-.025&&(D=.025),L=D-.025,h=1e100;do p=T._convertSplineTimeToBezierIndexTime(O+L),null!==p&&(r=T.getPositionAtIndexTime(p),rotation=E[z].getRotationAtIndexTime(p),g=this._rotateXYZ(q,rotation),a=(M[2]-r[2]-g[2])*b-(r[0]-M[0]+g[0])*y,s=r[1]-M[1]+g[1],o=(r[2]-M[2]+g[2])*y-(r[0]-M[0]+g[0])*b,l=o*C+s*w,c=o*w-s*C,_=v/c,a=e+a*_,s=t+l*_,d=a*a+s*s,h>d&&(h=d,D=L)),L+=2e-4;while(D+.05>L);P?k=D?D*D>P*P?P:D:P:D&&(k=D),k>0?.05>=k&&(this.scroll=this._scroll-k):k>=-.05&&(this.scroll=this._scroll-k)}},frame:{value:function(){this.isAnimating&&this._animationInterval()}},convertCssPixelsPropertyStringToNumber:{value:function(e){return"string"==typeof e?"px"===e.substr(-2)?1*e.substr(0,e.length-2):0:0}},_rayPointDistance:{value:function(e,t){var n,i,r,a,s;return n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],n>=0?(i=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n/=i,r=e[0]*n-t[0],a=e[1]*n-t[1],s=e[2]*n-t[2],Math.sqrt(r*r+a*a+s*s)):!1}},_rayRectangleIntersection:{value:function(e,t,n,i){var r,a,s,o,l,c=e[1]*i[2]-e[2]*i[1],u=e[2]*i[0]-e[0]*i[2],h=e[0]*i[1]-e[1]*i[0],d=n[0]*c+n[1]*u+n[2]*h,p=1e-10,f=!1;return-p>d?(r=-t[0]*c-t[1]*u-t[2]*h,0>r&&r>d&&(s=n[1]*t[2]-n[2]*t[1],o=n[2]*t[0]-n[0]*t[2],l=n[0]*t[1]-n[1]*t[0],a=e[0]*s+e[1]*o+e[2]*l,0>a&&a>d&&(f=(i[0]*s+i[1]*o+i[2]*l)/d,0>f&&(f=!1)))):d>p&&(r=-t[0]*c-t[1]*u-t[2]*h,r>0&&d>r&&(s=n[1]*t[2]-n[2]*t[1],o=n[2]*t[0]-n[0]*t[2],l=n[0]*t[1]-n[1]*t[0],a=e[0]*s+e[1]*o+e[2]*l,a>0&&d>a&&(f=(i[0]*s+i[1]*o+i[2]*l)/d,0>f&&(f=!1)))),f}},_rayRectangleIntersectionPosition:{enumerable:!1,value:function(e,t,n,i){var r,a,s,o,l,c=e[1]*i[2]-e[2]*i[1],u=e[2]*i[0]-e[0]*i[2],h=e[0]*i[1]-e[1]*i[0],d=n[0]*c+n[1]*u+n[2]*h,p=this._flow._boundingBoxSize;return r=-t[0]*c-t[1]*u-t[2]*h,s=n[1]*t[2]-n[2]*t[1],o=n[2]*t[0]-n[0]*t[2],l=n[0]*t[1]-n[1]*t[0],a=e[0]*s+e[1]*o+e[2]*l,[r*p[0]/d-.5*p[0],a*p[1]/d-.5*p[1],0]}},_rotateXYZ:{enumerable:!1,value:function(e,t){var n,i,r,a,s=Math.cos(t[0]),o=Math.sin(t[0]),l=Math.cos(t[1]),c=Math.sin(t[1]),u=Math.cos(t[2]),h=Math.sin(t[2]);return i=s*e[1]-o*e[2],r=o*e[1]+s*e[2],a=l*e[0]+c*r,r=-c*e[0]+l*r,n=u*a-h*i,i=h*a+u*i,[n,i,r]}},_pointerIntersectionPosition:{enumerable:!1,value:null},_closerIndex:{enumerable:!1,value:null},_computePointedElement:{value:function(){var e=this._flow._splinePaths,t=e.length;if(t){var n,i,r,a,s,o,l,c,u,h=this._flow,d=h.cameraTargetPoint[0]-h.cameraPosition[0],p=h.cameraTargetPoint[2]-h.cameraPosition[2],f=Math.atan2(d,p),m=p*Math.cos(-f)-d*Math.sin(-f),g=Math.atan2(h.cameraTargetPoint[1]-h.cameraPosition[1],m),v=.5*this._element.clientWidth-this._pointerX,_=this._pointerY-.5*this._element.clientHeight,b=.5*this._element.offsetHeight/Math.tan(h.cameraFov*h._doublePI*(1/720)),y=[],C=h._visibleIndexes,w=C.length,L=null,x=1e100;for(i=b*Math.cos(g)-_*Math.sin(g),_=b*Math.sin(g)+_*Math.cos(g),n=i*Math.cos(f)-v*Math.sin(f),v=i*Math.sin(f)+v*Math.cos(f),l=[v,_,n],u=0;e.length>u;u++)y[u]=e[u].transform([1,0,0,0,0,1,0,0,0,0,1,0,-h.cameraPosition[0],-h.cameraPosition[1],-h.cameraPosition[2],1]);for(u=0;w>u;u++)c=this._flow.offset(C[u]),r=c.pathIndex,a=c.slideTime,o=y[r]._convertSplineTimeToBezierIndexTime(a),null!==o&&(pos=y[r].getPositionAtIndexTime(o),s=this._rayPointDistance(l,pos),s!==!1&&x>s&&(x=s,L=C[u]));
this._closerIndex=L}}},test:{enumerable:!1,value:function(){var e,t,n,i,r,a,s,o,l,c,u=this._flow,h=this._bezierValue,d=u.cameraTargetPoint[0]-u.cameraPosition[0],p=u.cameraTargetPoint[1]-u.cameraPosition[1],f=u.cameraTargetPoint[2]-u.cameraPosition[2],m=Math.atan2(d,f),g=this._pointerX,v=this._pointerY;if(e=f*Math.cos(-m)-d*Math.sin(-m),t=Math.atan2(p,e),i=.5*this._element.clientWidth-g,r=v-.5*this._element.clientHeight,c=a=.5*this._element.offsetHeight/Math.tan(u.cameraFov*u._doublePI*(1/720)),l=a*Math.cos(t)-r*Math.sin(t),o=a*Math.sin(t)+r*Math.cos(t),s=i,a=l*Math.cos(m)-s*Math.sin(m),i=l*Math.sin(m)+s*Math.cos(m),r=o,this.t=n=this._raycastBezierTubes(u._cameraPosition[0],u._cameraPosition[1],u._cameraPosition[2],this._computeRotationValuesToXAxis(i,r,a)),null!==n[0]){var i,r,a,s,o,l,_,b,y,C,w,L=[u._splinePaths[n[0]]._knots[n[1]][0]-u._cameraPosition[0],u._splinePaths[n[0]]._knots[n[1]][1]-u._cameraPosition[1],u._splinePaths[n[0]]._knots[n[1]][2]-u._cameraPosition[2],u._splinePaths[n[0]]._nextHandlers[n[1]][0]-u._cameraPosition[0],u._splinePaths[n[0]]._nextHandlers[n[1]][1]-u._cameraPosition[1],u._splinePaths[n[0]]._nextHandlers[n[1]][2]-u._cameraPosition[2],u._splinePaths[n[0]]._previousHandlers[n[1]+1][0]-u._cameraPosition[0],u._splinePaths[n[0]]._previousHandlers[n[1]+1][1]-u._cameraPosition[1],u._splinePaths[n[0]]._previousHandlers[n[1]+1][2]-u._cameraPosition[2],u._splinePaths[n[0]]._knots[n[1]+1][0]-u._cameraPosition[0],u._splinePaths[n[0]]._knots[n[1]+1][1]-u._cameraPosition[1],u._splinePaths[n[0]]._knots[n[1]+1][2]-u._cameraPosition[2]],x=[];for(w=0;12>w;w+=3)x[0]=L[w+2]*Math.sin(-m)+L[w]*Math.cos(-m),x[1]=L[w+1],x[2]=L[w+2]*Math.cos(-m)-L[w]*Math.sin(-m),L[w]=x[0],L[w+1]=x[2]*Math.sin(-t)+x[1]*Math.cos(-t),L[w+2]=x[2]*Math.cos(-t)-x[1]*Math.sin(-t);a=h(L[2],L[5],L[8],L[11],n[2]),l=h(L[2],L[5],L[8],L[11],n[2]+1e-8),i=h(L[0],L[3],L[6],L[9],n[2])/a,s=h(L[0],L[3],L[6],L[9],n[2]+1e-8)/l,_=(s-i)*c/1e-8,r=h(L[1],L[4],L[7],L[10],n[2])/a,o=h(L[1],L[4],L[7],L[10],n[2]+1e-8)/l,dy=(o-r)*c/1e-8,b=Math.sqrt(_*_+dy*dy),y=Math.atan2(dy,_),C=u._splinePaths[n[0]]._densities[n[1]]*(1-n[2])+u._splinePaths[n[0]]._densities[n[1]+1]*n[2],this._lineVectorX=Math.cos(-y)*b/C,this._lineVectorY=Math.sin(-y)*b/C}}},_lineVectorX:{enumerable:!1,value:80*Math.cos(Math.PI-.6)},_lineVectorY:{enumerable:!1,value:80*Math.sin(Math.PI-.6)},_startX:{enumerable:!1,value:0},_startY:{enumerable:!1,value:0},_currentX:{enumerable:!1,value:0},_currentY:{enumerable:!1,value:0},_previousScrollDelta:{enumerable:!1,value:0},_startScroll:{enumerable:!1,value:0},_bezierValue:{enumerable:!1,value:function(e,t,n,i,r){var a=1-r;return e*a*a*a+3*t*a*a*r+3*n*a*r*r+i*r*r*r}},_computeRotationValuesToXAxis:{enumerable:!1,value:function(e,t,n){var i,r,a,s,o;return 1e-100>e*e&&(e=1e-50),i=e*e+t*t,r=Math.sqrt(i),a=1/r,o=e*a,s=-t*a,a=1/Math.sqrt(i+n*n),[s,o,-n*a,r*a]}},_infinite:{enumerable:!1,value:1e100},_sphereIntersection:{enumerable:!1,value:function(e,t){var n,i,r,a=e[0]*t[1]-e[1]*t[0],s=e[0]*t[0]+e[1]*t[1],o=a*t[2]+e[2]*t[3],l=e[3]*e[3];return l>=s*s+o*o?(n=a*t[3]-e[2]*t[2],i=Math.sqrt(l-s*s-o*o),r=n-i,0>r?0>n+i?this._infinite:0:r):this._infinite}},_bezierTubeBoundingSphere:{enumerable:!1,value:function(e,t){var n,i,r,a,s,o=e[0],l=e[1],c=e[2],u=e[0],h=e[1],d=e[2];return s=e[3],o>s?o=s:s>u&&(u=s),s=e[4],l>s?l=s:s>h&&(h=s),s=e[5],c>s?c=s:s>d&&(d=s),s=e[6],o>s?o=s:s>u&&(u=s),s=e[7],l>s?l=s:s>h&&(h=s),s=e[8],c>s?c=s:s>d&&(d=s),s=e[9],o>s?o=s:s>u&&(u=s),s=e[10],l>s?l=s:s>h&&(h=s),s=e[11],c>s?c=s:s>d&&(d=s),n=.5*(u-o),i=.5*(h-l),r=.5*(d-c),a=Math.sqrt(n*n+i*i+r*r)+t,[o+n,l+i,c+r,a]}},_raycastBezierTubes:{enumerable:!1,value:function(e,t,n,i){var r,a,s,o,l,c,u,h,d,p,f,m,g,v,_,b,y,C,w,L,x,M,E,S,z,T,O,P,D=[],k=this._infinite,A=null,j=0,B=null,I=0,R=this._flow._splinePaths;for(P=0;R.length>P;P++)for(O=0;R[P]._knots.length-1>O;O++)D[I]=[R[P]._knots[O][0]-e,R[P]._knots[O][1]-t,R[P]._knots[O][2]-n,R[P]._nextHandlers[O][0]-e,R[P]._nextHandlers[O][1]-t,R[P]._nextHandlers[O][2]-n,R[P]._previousHandlers[O+1][0]-e,R[P]._previousHandlers[O+1][1]-t,R[P]._previousHandlers[O+1][2]-n,R[P]._knots[O+1][0]-e,R[P]._knots[O+1][1]-t,R[P]._knots[O+1][2]-n,0,1048576,O,P],I++;for(O=I-1;O>=0;)u=D[O],h=.5*(u[0]+u[3]),d=.5*(u[3]+u[6]),p=.5*(u[6]+u[9]),v=.5*(u[1]+u[4]),_=.5*(u[4]+u[7]),b=.5*(u[7]+u[10]),L=.5*(u[2]+u[5]),x=.5*(u[5]+u[8]),M=.5*(u[8]+u[11]),f=.5*(h+d),m=.5*(d+p),g=.5*(f+m),y=.5*(v+_),C=.5*(_+b),w=.5*(y+C),E=.5*(L+x),S=.5*(x+M),z=.5*(E+S),T=u[13]>>1,s=[u[0],u[1],u[2],h,v,L,f,y,E,g,w,z,u[12],T,u[14],u[15]],r=this._bezierTubeBoundingSphere(s,this._flow._elementsBoundingSphereRadius),o=[g,w,z,m,C,S,p,b,M,u[9],u[10],u[11],u[12]+T,T,u[14],u[15]],a=this._bezierTubeBoundingSphere(o,this._flow._elementsBoundingSphereRadius),l=this._sphereIntersection(r,i),c=this._sphereIntersection(a,i),k>l?k>c?c>l?T?(D[O++]=o,D[O]=s):(k=l-1e-5,j=u[12],A=u[14],B=u[15],O--):T?(D[O++]=s,D[O]=o):(k=c-1e-5,j=u[12],A=u[14],B=u[15],O--):T?D[O]=s:(k=l-1e-5,j=u[12],A=u[14],B=u[15],O--):k>c?T?D[O]=o:(k=c-1e-5,j=u[12],A=u[14],B=u[15],O--):O--;return[B,A,j*(1/1048576)]}},_translateStride:{enumerable:!1,value:null},translateStride:{serializable:!0,get:function(){return this._translateStride},set:function(e){this._translateStride=e,this.translateStrideX=e}},startStrideTime:{enumerable:!1,value:null},_scrollEnd:{enumerable:!1,value:null},_scrollStart:{enumerable:!1,value:null},_hasMomentum:{enumerable:!1,value:!0},isLimitedToSingleStride:{value:!1},_animationInterval:{enumerable:!1,value:function(){var e,t,n,i,r,a,s=Date.now(),o=!1;r=this.minScroll,a=this.maxScroll,this.minScroll=null,this.maxScroll=null,null===this._scrollEnd&&(this._scrollStart=this.scroll,this._pageX=this.endX,this._pageY=this.endY,this._updateScroll(),this._scrollEnd=this.scroll,this.isLimitedToSingleStride&&this.translateStrideX&&(this._scrollEnd>Math.floor(this._scrollStart)+this.translateStrideX&&(this._scrollEnd=Math.floor(this._scrollStart)+this.translateStrideX),this._scrollEnd<Math.ceil(this._scrollStart)-this.translateStrideX&&(this._scrollEnd=Math.ceil(this._scrollStart)-this.translateStrideX)),this._pageX=this.startX,this._pageY=this.startY,this._updateScroll()),this.animateMomentum?(e=s-this.startTime,this.__momentumDuration>e?(this._pageX=this.startX+(this.momentumX+this.momentumX*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this._pageY=this.startY+(this.momentumY+this.momentumY*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this._updateScroll(),this.translateStrideX&&null===this.startStrideXTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.scroll-this._scrollEnd)<.75*this.translateStrideX)&&(this.startStrideXTime=s,this._strideStartScroll=this._scroll)):this.animateMomentum=!1):null===this.startStrideXTime&&(this.startStrideXTime=this.startTime,this._strideStartScroll=this._scrollStart),i=this.scroll,this.startStrideXTime&&s-this.startStrideXTime>0&&(n=Math.round(this._scrollEnd/this.translateStrideX),s-this.startStrideXTime<this.translateStrideDuration?(e=this._bezierTValue((s-this.startStrideXTime)/this.translateStrideDuration,.275,0,.275,1),t=(s-this.startStrideXTime)/this.translateStrideDuration,i=i*(1-t)+(n*this.translateStrideX*e+this._strideStartScroll*(1-e))*t,o=!0):(i=n*this.translateStrideX,this.animateMomentum=!1)),this.minScroll=r,this.maxScroll=a,r>i&&(i=r,this.animateMomentum=!1,o=!1),i>a&&(i=a,this.animateMomentum=!1,o=!1),this.scroll=i,this.isAnimating=this.animateMomentum||o,this.isAnimating?this.needsFrame=!0:(this._dispatchTranslateEnd(),this._scrollEnd=null)}}})}}),montageDefine("3cbcb4a","ui/repetition.reel/repetition",{dependencies:["../../core/core","../component","../../core/template","../../core/range-controller","../../core/promise","../../core/browser","collections/map","collections/set","../../core/deprecate","../../core/logger","frb/observers"],factory:function(e,t){var n=e("../../core/core").Montage,i=e("../component").Component;e("../../core/template").Template;var r=e("../../core/range-controller").RangeController,a=e("../../core/promise").Promise,s=e("../../core/browser").browser,o=e("collections/map"),l=e("collections/set"),c=e("../../core/deprecate").deprecationWarning,u=e("../../core/logger").logger("repetition").color.magenta(),h=e("frb/observers"),d=h.observeProperty,p=h.observeKey,f=t.Iteration=n.specialize({repetition:{value:null},controller:{value:null},object:{value:null},selected:{value:null},_fragment:{value:null},_childComponents:{value:null},index:{value:null},_drawnIndex:{value:null},active:{value:null},_noTransition:{value:null},_templateDocumentPart:{value:null},isDirty:{value:!1},constructor:{value:function f(){this.super(),u.isDebug&&u.debug("Iteration:%s create iteration %O",Object.hash(this),this),this.repetition=null,this.controller=null,this.object=null,this.defineBinding("selected",{"<->":"object.defined() ? repetition.contentController.selection.has(object) : selected"}),this._fragment=null,this._childComponents=null,this.index=null,this._drawnIndex=null,this.active=!1,this.defineBinding("active",{"<->":"repetition.activeIterations.has(())"}),this._noTransition=!1,this.addOwnPropertyChangeListener("active",this),this.addOwnPropertyChangeListener("selected",this),this.addOwnPropertyChangeListener("_noTransition",this),this.addPathChangeListener("index.defined() && _childComponents.defined()",this,"handleComponentModelChange"),this.cachedFirstElement=null}},initWithRepetition:{value:function(e){return this.repetition=e,this}},recycle:{value:function(){this.index=null,this.object=null,this._noTransition=!0}},injectIntoDocument:{value:function(e){null!==this._drawnIndex?(u.isDebug&&u.debug("Iteration:%s retracting from index %s and injecting at %s",Object.hash(this),this._drawnIndex,e),this.retractFromDocument()):u.isDebug&&u.debug("Iteration:%s injecting at index %s",Object.hash(this),e);var t=this,n=this.repetition,i=n.element,r=n._boundaries,a=i.ownerDocument.createTextNode(""),s=r[e];if(r.splice(e,0,a),i.insertBefore(a,s),i.insertBefore(this._fragment,s),n._drawnIterations.splice(e,0,this),n._updateDrawnIndexes(e),n._addDirtyClassListIteration(this),!this._elementsWillBeAddedToMap){var o=this._childComponents.length,l=function(e){e.target.removeEventListener("firstDraw",l,!1),o--,o||t.forEachElement(function(e){n._iterationForElement.set(e,t)})};if(this._childComponents.length>0)for(var c=0;this._childComponents.length>c;c++){var h=this._childComponents[c];h.addEventListener("firstDraw",l,!1),h.needsDraw=!0,h._completedFirstDraw===!0&&console.error("Repetiton:%s child component %O has already drawn.",Object.hash(this),h)}else this.forEachElement(function(e){n._iterationForElement.set(e,t)});this._elementsWillBeAddedToMap=!0}}},_elementsWillBeAddedToMap:{value:!1},retractFromDocument:{value:function(){u.isDebug&&u.debug("Iteration:%s retractFromDocument drawnIndex: %s",Object.hash(this),this._drawnIndex);var e=this._drawnIndex,t=this.repetition,n=t.element,i=t._boundaries[e],r=t._boundaries[e+1];t._boundaries.splice(e,1);for(var a=this._fragment,s=i.nextSibling;s!=r;){var o=s.nextSibling;n.removeChild(s),a.appendChild(s),s=o}n.removeChild(i),this._drawnIndex=null,t._drawnIterations.splice(e,1),t._updateDrawnIndexes(e)}},handleComponentModelChange:{value:function(e){e?this._childComponents.forEach(this.repetition.addChildComponent,this.repetition):this._childComponents&&this._childComponents.forEach(this.repetition.removeChildComponent,this.repetition)}},handlePropertyChange:{value:function(){this.repetition&&(this.repetition._addDirtyClassListIteration(this),this.repetition.needsDraw=!0)}},forEachElement:{value:function(e,t){var n=this.repetition,i=this._drawnIndex;if(null!=i)for(var r=n._boundaries[i];r!==n._boundaries[i+1];r=r.nextSibling)1===r.nodeType&&e.call(t,r)}},firstElement:{get:function(){var e=this.repetition,t=this._drawnIndex;if(null!=t)for(var n=e._boundaries[t];n!==e._boundaries[t+1];n=n.nextSibling)if(1===n.nodeType)return this.cachedFirstElement=n,n}},isComponentTreeLoaded:{value:function(){return null!==this._fragment}},cachedFirstElement:{value:null}});t.Repetition=i.specialize({initWithContent:{value:function(e){return this.object=e,this}},initWithContentController:{value:function(e){return this.contentController=e,this}},content:{get:function(){return this.getPath("contentController.content")},set:function(e){this.contentController=(new r).initWithContent(e)}},contentController:{value:null},isSelectionEnabled:{value:null},selection:{value:null},selectedIterations:{value:null},selectedIndexes:{value:null},activeIterations:{value:null},iterations:{value:null},currentIteration:{value:null},objectAtCurrentIteration:{value:null},hasTemplate:{value:!1},_iterationTemplate:{value:null},clonesChildComponents:{value:!0},constructor:{value:function(){this.super(),this.contentController=null,this.organizedContent=[],this.defineBinding("organizedContent.rangeContent()",{"<-":"contentController.organizedContent"}),this.isSelectionEnabled=!1,this.defineBinding("selection",{"<->":"contentController.selection"}),this.defineBinding("selectedIterations",{"<-":"iterations.filter{selected}"}),this.defineBinding("selectedIndexes",{"<-":"selectedIterations.map{index}"}),this._iterationTemplate=null,this.addPathChangeListener(this._setupRequirements,this,"_handleSetupRequirementsChange"),this.addPathChangeListener("innerTemplate",this,"_handleInnerTemplateChange"),this.iterations=[],this._drawnIterations=[],this._freeIterations=[],this._contentForIteration=o(),this._iterationForElement=o(),this.currentIteration=null,this._templateId=null,this._iterationCreationPromise=a.resolve(),this._boundaries=[],this._dirtyClassListIterations=l(),this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._initialContentDrawn=!1,this.addOwnPropertyChangeListener("isSelectionEnabled",this),this._selectionPointer=null,this.activeIterations=[]}},_setupRequirements:{value:"[!_iterationTemplate.defined(),!_newDomContent.defined(),!_shouldClearDomContentOnNextDraw,_isComponentExpanded,_ownerDocumentPart.defined()].every{}"},_handleSetupRequirementsChange:{value:function(e){e&&this._setupIterationTemplate()}},_handleInnerTemplateChange:{value:function(e){this._iterationTemplate&&this._teardownIterationTemplate(),e&&this.getPath(this._setupRequirements)&&this._setupIterationTemplate()}},cleanupDeletedComponentTree:{value:function(e){var t=this._innerTemplate;this._innerTemplate=null,t&&this._teardownIterationTemplate(),e&&this.cancelBindings()}},expandComponent:{value:function(){return this._isComponentExpanded=!0,a.resolve()}},_buildIterationTemplate:{value:function(){var e,t,i,r;return e=this.innerTemplate.clone(),t=e.getSerialization(),i=t.getSerializationObject(),r=n.getInfoForObject(this).label,this._iterationLabel=r+":iteration",i[this._iterationLabel]={},e.setObjects(i),this.innerTemplate.hasParameters()&&this._expandIterationTemplateParameters(e),window._montage_le_flag&&(e.refresher=this,this._leTagIterationTemplate(e)),e}},_rebuildIterationTemplate:{value:function(){var e,t=this._iterationTemplate,n=this.iterations;this._purgeFreeIterations();for(var i,r=0;i=n[r];r++)i.isDirty=!0;this._innerTemplate=null,e=this._buildIterationTemplate(),t.replaceContentsWithTemplate(e)}},refreshTemplate:{value:function(){this._rebuildIterationTemplate()}},_setupIterationTemplate:{value:function(){var e=this;this._iterationTemplate=this._buildIterationTemplate();for(var t,n=e.childComponents,i=n.length-1;t=n[i--];)t.detachFromParentComponent(),t.needsDraw=!1,t.cleanupDeletedComponentTree(!0);e.handleOrganizedContentRangeChange(e.organizedContent,[],0),e.organizedContent.addRangeChangeListener(e,"organizedContent"),e._canDrawInitialContent=!0,e.needsDraw=!0}},_leTagIterationTemplate:{value:function(e){var t=e.document.body;if(t.children.length>0){var n=this.ownerComponent._montage_metadata.moduleId,i=this._montage_metadata.label;this._leTagStarArgument(n,i,t)}}},_teardownIterationTemplate:{value:function(){this.organizedContent.removeRangeChangeListener(this,"organizedContent"),this.handleOrganizedContentRangeChange([],this.organizedContent,0),this._purgeFreeIterations(),this._iterationTemplate=null,this._contentForIteration.clear(),this._iterationForElement.clear(),this.currentIteration=null,this._templateId=null,this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._selectionPointer=null,this.activeIterations.clear(),this._dirtyClassListIterations.clear()}},_purgeFreeIterations:{value:function(){for(var e=0;this._freeIterations.length>e;e++)for(var t=this._freeIterations[e],n=0;t._childComponents.length>n;n++){var i=t._childComponents[n];this.removeChildComponent(i),i.cleanupDeletedComponentTree(!0)}this._freeIterations.clear()}},_expandIterationTemplateParameters:{value:function(e){for(var t,n,i,r,a,s,o,l,c,u=this;e.hasParameters();){u=u.ownerComponent,t=u._ownerDocumentPart.template,r=u._ownerDocumentPart.objects,s=e.expandParameters(u),i=e.getSerialization().getExternalObjectLabels(),a=e.getInstances(),l=s.labels,n=s.labelsCollisions;for(var h,d=0;h=l[d];d++)o=n&&h in n?n[h]:h,i.indexOf(o)>=0?a[o]=r[h]:(c=t.getObjectMetadata(h),c.owner||(c.owner=r.owner),e.setObjectMetadata(o,c.require,c.label,c.owner))}}},_iterationLabel:{value:null},_iterationCreationPromise:{value:null},_createIteration:{value:function(){var e=this,t=(new this.Iteration).initWithRepetition(this);return this._iterationCreationPromise=this._iterationCreationPromise.then(function(){var n,i,r=e.element.ownerDocument;return e.currentIteration=t,n=e._iterationTemplate.getInstances(),n=Object.create(n),n[e._iterationLabel]=t,i=e._iterationTemplate.instantiateWithInstances(n,r).then(function(n){n.parentDocumentPart=e._ownerDocumentPart,t._templateDocumentPart=n,n.loadComponentTree().then(function(){u.isDebug&&u.debug("Iteration:%s component tree loaded.",Object.hash(t)),t._fragment=n.fragment,t._childComponents=n.childComponents,e.constructIteration(t)}).done(),e.currentIteration=null}),i.done(),i.then(null,function(){})}),this._requestedIterations++,t}},constructIteration:{value:function(){this._createdIterations++,this._createdIterations>=this._requestedIterations&&(this.needsDraw=!0,this._canDraw=!0)}},observeProperty:{value:function(e,t,n){return"contentAtCurrentIteration"===e||"objectAtCurrentIteration"===e?("contentAtCurrentIteration"===e?c("contentAtCurrentIteration",":iteration.object"):"objectAtCurrentIteration"===e&&c("objectAtCurrentIteration",":iteration.object"),p(this._contentForIteration,this.currentIteration,t,n)):"currentIteration"===e?(c("currentIteration",":iteration"),t(this.currentIteration)):d(this,e,t,n)}},makePropertyObservable:{value:function(e){return"currentIteration"!==e?n.makePropertyObservable.call(this,e):void 0}},_controllerIterations:{value:null},_drawnIterations:{value:null},_freeIterations:{value:null},_contentForIteration:{value:null},handleOrganizedContentRangeChange:{value:function(e,t,n){u.isDebug&&u.debug("Repetition:%s content changed +%s@%s %O -%s %O ",Object.hash(this),e?e.length:0,n,e,t?t.length:0,t);var i=this.iterations,r=this._contentForIteration;this._iterationTemplate.isDirty&&this._iterationTemplate.refresh();var a=Math.min(e.length,t.length),s=t.length-a,o=e.length-a;if(u.isDebug&&u.debug("Repetition:%s +%s -%s iterations",Object.hash(this),o,s),a>0)for(var l=0;a>l;l++,n++)i[n].object=e[l],r.set(i[n],e[l]);if(s>0){var c=i.splice(n,s);c.forEach(function(e){e.recycle()});for(var h,l=0;h=c[l];l++)h.isDirty||this._freeIterations.push(h)}if(o>0){if(u.isDebug)var d=[];for(;o>this._freeIterations.length;)this._freeIterations.push(this._createIteration()),u.isDebug&&d.push(this._freeIterations[this._freeIterations.length-1]);for(var p=Array(o),l=a,f=0;e.length>l;l++,f++){var m=this._freeIterations.pop();u.isDebug&&(d.has(m)||u.debug("Repetition:%s reusing %s",Object.hash(this),Object.hash(m)));var g=e[l];m.object=g,r.set(m,g),p[f]=m}i.swap(n,0,p)}(s>0||o>0)&&this._updateIndexes(n),this.needsDraw=!0}},_updateIndexes:{value:function(e){for(var t=this.iterations;t.length>e;e++)t[e].index=e}},_addDirtyClassListIteration:{value:function(e){e.forEachElement(function(t){var n;t&&(n=t.component)?(n.classList[e.active?"add":"remove"]("active"),n.classList[e.selected?"add":"remove"]("selected"),n.classList.remove("no-transition")):this._dirtyClassListIterations.add(e)},this)}},canDraw:{value:function(){var e=this.canDrawGate.value;return e=e&&this._requestedIterations<=this._createdIterations,e=e&&(this._initialContentDrawn||this._canDrawInitialContent)}},_boundaries:{value:null},_dirtyClassListIterations:{value:null},_requestedIterations:{value:null},_createdIterations:{value:null},_canDrawInitialContent:{value:null},_initialContentDrawn:{value:null},draw:{value:function(){this._initialContentDrawn||(this._drawInitialContent(),this._initialContentDrawn=!0);for(var e=this._drawnIterations.length-1;e>=0;e--)null===this._drawnIterations[e].index&&this._drawnIterations[e].retractFromDocument();for(var e=0;this.iterations.length>e;e++){var t=this.iterations[e];t._drawnIndex!==t.index&&t.isComponentTreeLoaded()&&t.injectIntoDocument(e)}var n=this._dirtyClassListIterations.toArray();this._dirtyClassListIterations.clear(),n.forEach(function(e){e.isComponentTreeLoaded()&&e.forEachElement(function(t){t.component||(t.classList[e.active?"add":"remove"]("active"),t.classList[e.selected?"add":"remove"]("selected"),t.classList.remove("no-transition"))},this)},this)}},_drawInitialContent:{value:function(){for(var e=this.element,t=e.childNodes.length,n=0;t>n;n++)e.removeChild(e.firstChild);var i=e.ownerDocument.createTextNode("");e.appendChild(i),this._boundaries.push(i)}},_updateDrawnIndexes:{value:function(e){for(var t=this._drawnIterations;t.length>e;e++)t[e]._drawnIndex=e}},_selectionPointer:{value:null},handleIsSelectionEnabledChange:{value:function(e){e?this._enableSelectionTracking():this._disableSelectionTracking()}},_enableSelectionTracking:{value:function(){s.android&&s.android.androidBrowser?window.Touch?this.element.addEventListener("touchstart",this,!0):this.element.addEventListener("mousedown",this,!0):(this.element.addEventListener("touchstart",this,!0),this.element.addEventListener("mousedown",this,!0))}},_disableSelectionTracking:{value:function(){s.android&&s.android.androidBrowser?window.Touch?this.element.removeEventListener("touchstart",this,!0):this.element.removeEventListener("mousedown",this,!0):(this.element.removeEventListener("touchstart",this,!0),this.element.removeEventListener("mousedown",this,!0))}},_observeSelectionPointer:{value:function(e){this._selectionPointer=e,this.eventManager.claimPointer(e,this);var t=this.element.ownerDocument;t.addEventListener("touchend",this,!1),t.addEventListener("touchcancel",this,!1),t.addEventListener("mouseup",this,!1)}},_ignoreSelectionPointer:{value:function(){this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)&&this.eventManager.forfeitPointer(this._selectionPointer,this),this._selectionPointer=null,this.activeIterations.clear();var e=this.element.ownerDocument;e.removeEventListener("touchend",this,!1),e.removeEventListener("touchcancel",this,!1),e.removeEventListener("mouseup",this,!1)}},captureMousedown:{value:function(e){if(null==this._selectionPointer){this._observeSelectionPointer("mouse");var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}}},captureTouchstart:{value:function(e){if(null==this._selectionPointer){this._observeSelectionPointer(e.changedTouches[0].identifier);var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}}},handleTouchend:{value:function(e){for(var t=0;e.changedTouches.length>t&&!this._endSelectionOnTarget(e.changedTouches[t].identifier,e.target);t++);}},handleTouchcancel:{value:function(){this._ignoreSelectionPointer()}},handleMouseup:{value:function(e){this._endSelectionOnTarget("mouse",e.target)}},_endSelectionOnTarget:{value:function(e,t){if(e===this._selectionPointer){if(this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)){var n=this._findIterationContainingElement(t);n&&(n.active=!1,n.selected||(n.selected=!0))}return this._ignoreSelectionPointer(),!0}}},_findIterationContainingElement:{value:function(e){for(var t;e;){if(e===this.element)return this._iterationForElement.get(t);t=e,e=e.parentNode}}},Iteration:{value:f,serializable:!1}})}}),montageDefine("3cbcb4a","composer/translate-composer",{dependencies:["./composer","../core/event/event-manager"],factory:function(e,t){var n=e("./composer").Composer,i=e("../core/event/event-manager").defaultEventManager,r=t.TranslateComposer=n.specialize({constructor:{value:function r(){this.super()}},_NATIVE_ELEMENTS:{value:["A","IFRAME","EMBED","OBJECT","VIDEO","AUDIO","CANVAS","LABEL","INPUT","BUTTON","SELECT","TEXTAREA","KEYGEN","DETAILS","COMMAND"]},_WHEEL_POINTER:{value:"wheel",writable:!1},_externalUpdate:{value:!0},isAnimating:{value:!1},isMoving:{value:!1},stealChildrenPointer:{value:!1},stealChildrenPointerThreshold:{value:130},frame:{value:function(){this.isAnimating&&this._animationInterval(),this._externalUpdate=!1}},_pointerSpeedMultiplier:{value:1},pointerSpeedMultiplier:{get:function(){return this._pointerSpeedMultiplier},set:function(e){this._pointerSpeedMultiplier=e}},pointerStartEventPosition:{value:null},_shouldDispatchTranslate:{value:!1},_isSelfUpdate:{value:!1},_allowFloats:{value:!1},allowFloats:{get:function(){return this._allowFloats},set:function(e){this._allowFloats!==e&&(this._allowFloats=e,this.translateX=this._translateX,this.translateY=this._translateY)}},_translateX:{value:0},translateX:{get:function(){return this._translateX},set:function(e){if("vertical"===this._axis)this._translateX=this._minTranslateX||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateX&&this._minTranslateX>t&&(t=this._minTranslateX),null!==this._maxTranslateX&&t>this._maxTranslateX&&(t=this._maxTranslateX),this._isSelfUpdate||(this.isAnimating=!1),this._translateX=t}}},_translateY:{value:0},translateY:{get:function(){return this._translateY},set:function(e){if("horizontal"===this._axis)this._translateY=this._minTranslateY||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateY&&this._minTranslateY>t&&(t=this._minTranslateY),null!==this._maxTranslateY&&t>this._maxTranslateY&&(t=this._maxTranslateY),this._isSelfUpdate||(this.isAnimating=!1),this._translateY=t}}},_minTranslateX:{value:null},minTranslateX:{get:function(){return this._minTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateX!==e&&(null!==e&&e>this._translateX&&(this.translateX=e),this._minTranslateX=e)}},_maxTranslateX:{value:null},maxTranslateX:{get:function(){return this._maxTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateX!==e&&(null!==e&&this._translateX>e&&(this.translateX=e),this._maxTranslateX=e)}},_minTranslateY:{value:null},minTranslateY:{get:function(){return this._minTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateY!==e&&(null!==e&&e>this._translateY&&(this.translateY=e),this._minTranslateY=e)}},_maxTranslateY:{value:null},maxTranslateY:{get:function(){return this._maxTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateY!==e&&(null!==e&&this._translateY>e&&(this.translateY=e),this._maxTranslateY=e)}},_axis:{value:"both"},axis:{get:function(){return this._axis},set:function(e){switch(e){case"vertical":case"horizontal":this._axis=e,this.translateX=this._translateX,this.translateY=this._translateY;break;default:this._axis="both"}}},invertAxis:{depends:["invertXAxis","invertYAxis"],get:function(){return this._invertXAxis===this._invertYAxis?this._invertXAxis:null},set:function(e){this.invertXAxis=e,this.invertYAxis=e}},_invertXAxis:{value:!1},invertXAxis:{get:function(){return this._invertXAxis},set:function(e){this._invertXAxis=!!e}},_invertYAxis:{value:!1},invertYAxis:{get:function(){return this._invertYAxis},set:function(e){this._invertYAxis=!!e}},startTranslateSpeed:{value:500},startTranslateRadius:{value:8},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=e?!0:!1}},__momentumDuration:{value:650},_momentumDuration:{get:function(){return this.__momentumDuration},set:function(e){this.__momentumDuration=isNaN(e)?1:e>>0,1>this.__momentumDuration&&(this.__momentumDuration=1)}},_pointerX:{value:null},_pointerY:{value:null},_touchIdentifier:{value:null},_isFirstMove:{value:!1},_start:{value:function(e,t,n,i){this.pointerStartEventPosition={pageX:e,pageY:t,target:n,timeStamp:i},this._pointerX=e,this._pointerY=t,window.Touch?(this._element.addEventListener("touchend",this,!0),this._element.addEventListener("touchcancel",this,!0),this._element.addEventListener("touchmove",this,!0),this._element.addEventListener("touchmove",this,!1)):(document.addEventListener("mouseup",this,!0),this._element.addEventListener("mousemove",this,!0)),this.isAnimating&&(this.isAnimating=!1,this._dispatchTranslateEnd()),this._isFirstMove=!0}},_observedPointer:{value:null},_shouldPreventDefault:{value:function(e){return!!e.target.tagName&&-1===r._NATIVE_ELEMENTS.indexOf(e.target.tagName)&&!e.target.isContentEditable}},handleMousedown:{value:function(e){this._observedPointer="mouse",0!==e.button||this.eventManager.componentClaimingPointer(this._observedPointer)||(this._start(e.clientX,e.clientY,e.target,e.timeStamp),this.eventManager.claimPointer(this._observedPointer,this))}},captureMousemove:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&(e.preventDefault(),this._isFirstMove?this._firstMove():this._move(e.clientX,e.clientY))}},captureMouseup:{value:function(e){this._end(e)}},_releaseInterest:{value:function(){window.Touch?(this._element.removeEventListener("touchend",this,!0),this._element.removeEventListener("touchcancel",this,!0),this._isFirstMove&&this._element.removeEventListener("touchmove",this,!0),this._element.removeEventListener("touchmove",this,!1)):(document.removeEventListener("mouseup",this,!0),this._isFirstMove?this._element.removeEventListener("mousemove",this,!0):document.removeEventListener("mousemove",this,!0)),this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null}},captureTouchstart:{value:function(e){this._shouldPreventDefault(e)&&e.preventDefault(),null!==this._observedPointer&&this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)||e.targetTouches&&1===e.targetTouches.length&&(this._observedPointer=e.targetTouches[0].identifier,this._start(e.targetTouches[0].clientX,e.targetTouches[0].clientY,e.targetTouches[0].target,e.timeStamp))}},captureTouchmove:{value:function(e){var t;this.stealChildrenPointer&&this._isAxisMovement(e.targetTouches[0])&&(t=e.timeStamp-this.pointerStartEventPosition.timeStamp,this.stealChildrenPointerThreshold>t&&this.eventManager.claimPointer(this._observedPointer,this))}},handleTouchmove:{value:function(e){for(var t=0,n=e.changedTouches.length;n>t&&e.changedTouches[t].identifier!==this._observedPointer;)t++;n>t&&(this._isFirstMove&&(this.eventManager.componentClaimingPointer(this._observedPointer)||this.eventManager.claimPointer(this._observedPointer,this)),this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._isFirstMove?this._firstMove():this._move(e.changedTouches[t].clientX,e.changedTouches[t].clientY)):this._releaseInterest())}},captureTouchend:{value:function(e){for(var t=0,n=e.changedTouches.length;n>t&&e.changedTouches[t].identifier!==this._observedPointer;)t++;n>t&&this._end(e.changedTouches[t])}},captureTouchcancel:{value:function(e){for(var t=0,n=e.changedTouches.length;n>t&&e.changedTouches[t].identifier!==this._observedPointer;)t++;n>t&&this._cancel(e.changedTouches[t])
}},_isAxisMovement:{value:function(e){var t,n,i,r,a,s,o,l=e.velocity,c=.7853981633974483,u=2.356194490192345,h=-2.356194490192345,d=-.7853981633974483;if("both"===this.axis)return!0;if(!l||0===l.speed||isNaN(l.speed)?(s=this.pointerStartEventPosition.pageX-e.clientX,o=this.pointerStartEventPosition.pageY-e.clientY,a=Math.atan2(o,s)):a=l.angle,"horizontal"===this.axis){if(i=c>=a&&a>=d,r=a>=u||h>=a,i||r)return!0}else if("vertical"===this.axis&&(t=d>=a&&a>=h,n=a>=c&&u>=a,t||n))return!0;return!1}},_translateEndTimeout:{value:null},captureWheel:{value:function(){this.eventManager.componentClaimingPointer(this._WHEEL_POINTER)||this.eventManager.claimPointer(this._WHEEL_POINTER,this.component)}},handleWheel:{value:function(e){var t=this;if(this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this.component)){var n=this._translateY,i=e.wheelDeltaY||-e.deltaY||0;this._dispatchTranslateStart(),this.translateY=this._translateY-20*i/120,this._dispatchTranslate(),window.clearTimeout(this._translateEndTimeout),this._translateEndTimeout=window.setTimeout(function(){t._dispatchTranslateEnd()},400),n!==this._translateY&&this._shouldPreventDefault(e)&&e.preventDefault(),this.eventManager.forfeitPointer(this._WHEEL_POINTER,this.component)}}},_firstMove:{value:function(){this._isFirstMove&&(this._dispatchTranslateStart(this._translateX,this._translateY),this._isFirstMove=!1,this.isMoving=!0,window.Touch?this._element.removeEventListener("touchmove",this,!0):(document.addEventListener("mousemove",this,!0),this._element.removeEventListener("mousemove",this,!0)))}},_move:{value:function(e,t){var n;this._isSelfUpdate=!0,"vertical"!==this._axis&&(n=this._invertXAxis?this._pointerX-e:e-this._pointerX,this.translateX+=n*this._pointerSpeedMultiplier),"horizontal"!==this._axis&&(n=this._invertYAxis?this._pointerY-t:t-this._pointerY,this.translateY+=n*this._pointerSpeedMultiplier),this._isSelfUpdate=!1,this._pointerX=e,this._pointerY=t,this._shouldDispatchTranslate&&this._dispatchTranslate()}},_bezierTValue:{value:function(e,t,n,i,r){var a,s,o,l,c=1-3*i+3*t,u=3*i-6*t,h=3*t,d=.5;for(s=0;10>s;s++)l=d*d,a=3*c*l+2*u*d+h,o=1-d,d-=(3*(o*o*d*t+o*l*i)+l*d-e)/a;return l=d*d,o=1-d,3*(o*o*d*n+o*l*r)+l*d}},_dispatchTranslateStart:{value:function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent("translateStart",!0,!0,null),n.translateX=e,n.translateY=t,n.scroll=0,n.pointer=this._observedPointer,this.dispatchEvent(n)}},_dispatchTranslateEnd:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateEnd",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,this.dispatchEvent(e)}},_dispatchTranslateCancel:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateCancel",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,this.dispatchEvent(e)}},_dispatchTranslate:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translate",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,e.pointer=this._observedPointer,this.dispatchEvent(e)}},animateBouncingX:{value:!1,enumerable:!1},startTimeBounceX:{value:!1,enumerable:!1},animateBouncingY:{value:!1,enumerable:!1},startTimeBounceY:{value:!1,enumerable:!1},animateMomentum:{value:!1,enumerable:!1},startTime:{value:null,enumerable:!1},startX:{value:null,enumerable:!1},posX:{value:null,enumerable:!1},endX:{value:null,enumerable:!1},startY:{value:null,enumerable:!1},posY:{value:null,enumerable:!1},endY:{value:null,enumerable:!1},translateStrideX:{value:null},translateStrideY:{value:null},translateStrideDuration:{value:330},_animationInterval:{value:function(){var e,t,n,i,r=Date.now(),a=!1;this.animateMomentum&&(e=r-this.startTime,this.__momentumDuration>e?(this.posX=this.startX-(this.momentumX+this.momentumX*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.posY=this.startY-(this.momentumY+this.momentumY*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.translateStrideX&&null===this.startStrideXTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posX-this.endX)<.75*this.translateStrideX)&&(this.startStrideXTime=r),this.translateStrideY&&null===this.startStrideYTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posY-this.endY)<.75*this.translateStrideY)&&(this.startStrideYTime=r)):this.animateMomentum=!1),t=Math.round(this.endX/this.translateStrideX),this.startStrideXTime&&r-this.startStrideXTime>0&&(r-this.startStrideXTime<this.translateStrideDuration?(e=this._bezierTValue((r-this.startStrideXTime)/this.translateStrideDuration,.275,0,.275,1),this.posX=this.posX*(1-e)+t*this.translateStrideX*e,a=!0):this.posX=t*this.translateStrideX),t=Math.round(this.endY/this.translateStrideY),this.startStrideYTime&&r-this.startStrideYTime>0&&(r-this.startStrideYTime<this.translateStrideDuration?(e=this._bezierTValue((r-this.startStrideYTime)/this.translateStrideDuration,.275,0,.275,1),this.posY=this.posY*(1-e)+t*this.translateStrideY*e,a=!0):this.posY=t*this.translateStrideY),n=this.posX,i=this.posY,this._isSelfUpdate=!0,this.translateX=n,this.translateY=i,this._shouldDispatchTranslate&&this._dispatchTranslate(),this._isSelfUpdate=!1,this.isAnimating=this.animateMomentum||a,this.isAnimating?this.needsFrame=!0:this._dispatchTranslateEnd()}},_end:{value:function(e){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY,this._hasMomentum&&(e.velocity.speed>40||this.translateStrideX||this.translateStrideY)?(this.momentumX="vertical"!==this._axis?e.velocity.x*this._pointerSpeedMultiplier*(this._invertXAxis?1:-1):0,this.momentumY="horizontal"!==this._axis?e.velocity.y*this._pointerSpeedMultiplier*(this._invertYAxis?1:-1):0,this.endX=this.startX-this.momentumX*this.__momentumDuration/2e3,this.endY=this.startY-this.momentumY*this.__momentumDuration/2e3,this.startStrideXTime=null,this.startStrideYTime=null,this.animateMomentum=!0):this.animateMomentum=!1,this.animateMomentum?this._animationInterval():this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateEnd()),this._releaseInterest()}},_cancel:{value:function(){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY,this.animateMomentum=!1,this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateCancel()),this._releaseInterest()}},surrenderPointer:{value:function(e,t){return!this.isMoving&&t.stealChildrenPointer&&t.stealChildrenPointerThreshold<=this.stealChildrenPointerThreshold}},eventManager:{get:function(){return i}},load:{value:function(){if(window.Touch)this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("touchstart",this,!1);else{this._element.addEventListener("mousedown",this,!1);var e;e=void 0!==window.onwheel?"wheel":"mousewheel",this._element.addEventListener(e,this,!1),this._element.addEventListener(e,this,!0)}this.eventManager.isStoringPointerEvents=!0}},addEventListener:{value:function(e,t,i){n.addEventListener.call(this,e,t,i),"translate"===e&&(this._shouldDispatchTranslate=!0)}}});r.prototype.handleMousewheel=r.prototype.handleWheel,r.prototype.captureMousewheel=r.prototype.captureWheel}}),montageDefine("a65aff3","reqwest",{dependencies:[],factory:function(require,exports,module){!function(e,t,n){void 0!==module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):t[e]=n()}("reqwest",this,function(){function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,twoHundo.test(e.request.status)?t(e.request):n(e.request)),void 0)}}function setHeaders(e,t){var n,i=t.headers||{};i.Accept=i.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"],t.crossOrigin||i[requestedWith]||(i[requestedWith]=defaultHeaders.requestedWith),i[contentType]||(i[contentType]=t.contentType||defaultHeaders.contentType);for(n in i)i.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,i[n])}function setCredentials(e,t){void 0!==t.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,i){var r=uniqid++,a=e.jsonpCallback||"callback",s=e.jsonpCallbackName||reqwest.getcallbackPrefix(r),o=RegExp("((^|\\?|&)"+a+")=([^&]+)"),l=i.match(o),c=doc.createElement("script"),u=0,h=-1!==navigator.userAgent.indexOf("MSIE 10.0");return l?"?"===l[3]?i=i.replace(o,"$1="+s):s=l[3]:i=urlappend(i,a+"="+s),win[s]=generalCallback,c.type="text/javascript",c.src=i,c.async=!0,void 0===c.onreadystatechange||h||(c.htmlFor=c.id="_reqwest_"+r),c.onload=c.onreadystatechange=function(){return c[readyState]&&"complete"!==c[readyState]&&"loaded"!==c[readyState]||u?!1:(c.onload=c.onreadystatechange=null,c.onclick&&c.onclick(),t(lastValue),lastValue=void 0,head.removeChild(c),u=1,void 0)},head.appendChild(c),{abort:function(){c.onload=c.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(c),u=1}}}function getRequest(e,t){var n,i=this.o,r=(i.method||"GET").toUpperCase(),a="string"==typeof i?i:i.url,s=i.processData!==!1&&i.data&&"string"!=typeof i.data?reqwest.toQueryString(i.data):i.data||null,o=!1;return"jsonp"!=i.type&&"GET"!=r||!s||(a=urlappend(a,s),s=null),"jsonp"==i.type?handleJsonp(i,e,t,a):(n=i.xhr&&i.xhr(i)||xhr(i),n.open(r,a,i.async===!1?!1:!0),setHeaders(n,i),setCredentials(n,i),win[xDomainRequest]&&n instanceof win[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},o=!0):n.onreadystatechange=handleReadyState(this,e,t),i.before&&i.before(n),o?setTimeout(function(){n.send(s)},200):n.send(s),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,i,r,a,s=e.name,o=e.tagName.toLowerCase(),l=function(e){e&&!e.disabled&&t(s,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&s)switch(o){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),i=/radio/i.test(e.type),r=e.value,(!(n||i)||e.checked)&&t(s,normalize(n&&""===r?"on":r)));break;case"textarea":t(s,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())l(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(a=0;e.length&&e.length>a;a++)e.options[a].selected&&l(e.options[a])}}function eachFormElement(){var e,t,n=this,i=function(e,t){var i,r,a;for(i=0;t.length>i;i++)for(a=e[byTag](t[i]),r=0;a.length>r;r++)serial(a[r],n)};for(t=0;arguments.length>t;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),i(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,i){var r,a,s,o=/\[\]$/;if(isArray(t))for(a=0;t&&t.length>a;a++)s=t[a],n||o.test(e)?i(e,s):buildParams(e+"["+("object"==typeof s?a:"")+"]",s,n,i);else if(t&&"[object Object]"==""+t)for(r in t)buildParams(e+"["+r+"]",t[r],n,i);else i(e,t)}var win=window,doc=document,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(win[xDomainRequest])return new XDomainRequest;throw Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,i,r=t||!1,a=[],s=encodeURIComponent,o=function(e,t){t="function"==typeof t?t():null==t?"":t,a[a.length]=s(e)+"="+s(t)};if(isArray(e))for(i=0;e&&e.length>i;i++)o(e[i].name,e[i].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],r,o);return a.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})}}),montageDefine("3cbcb4a","composer/press-composer",{dependencies:["../core/core","./composer","../core/event/mutable-event"],factory:function(e,t){var n=e("../core/core").Montage,i=e("./composer").Composer,r=e("../core/event/mutable-event").MutableEvent,a=t.PressComposer=i.specialize({load:{value:function(){window.Touch?this._element.addEventListener("touchstart",this,!0):this._element.addEventListener("mousedown",this,!0)}},unload:{value:function(){window.Touch?this._element.removeEventListener("touchstart",this,!0):this._element.removeEventListener("mousedown",this,!0)}},delegate:{value:null},cancelPress:{value:function(){return this._state===a.PRESSED?(this._dispatchPressCancel(),this._endInteraction(),!0):!1}},addEventListener:{value:function(e,t,n){i.addEventListener.call(this,e,t,n),"longPress"===e&&(this._shouldDispatchLongPress=!0)}},UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2},_state:{enumerable:!1,value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{enumerable:!1,value:!1},_longPressThreshold:{enumerable:!1,value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(e){this._longPressThreshold!==e&&(this._longPressThreshold=e)}},_longPressTimeout:{enumberable:!1,value:null},_observedPointer:{enumerable:!1,value:null},_startInteraction:{enumerable:!1,value:function(e){if("enabled"in this.component&&!this.component.enabled||null!==this._observedPointer)return!1;var t;"touchstart"===e.type?(t=e.changedTouches.length,1===t&&(this._observedPointer=e.changedTouches[0].identifier),document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1)):"mousedown"===e.type&&(this._observedPointer="mouse",document.addEventListener("mouseup",this,!1),document.addEventListener("click",this,!1)),this._element.addEventListener("dragstart",this,!1),this.component.eventManager.claimPointer(this._observedPointer,this),this._dispatchPressStart(e)}},_interpretInteraction:{value:function(e){var t,n,i;if(null===this._observedPointer)return this._endInteraction(e),void 0;for(t=!this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this),n=e.target;n!==this._element&&n&&n.parentNode;)n=n.parentNode;if(i=n===this._element,t&&"click"===e.type)return e.preventDefault(),this._endInteraction(e),void 0;if("mouseup"===e.type){if(!t&&i)return this._dispatchPress(e),this._endInteraction(e),void 0;if(!t&&!i)return this._dispatchPressCancel(e),this._endInteraction(e),void 0;this._endInteraction(e)}}},_endInteraction:{value:function(){document.removeEventListener("touchend",this),document.removeEventListener("touchcancel",this),document.removeEventListener("click",this),document.removeEventListener("mouseup",this),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._state=a.UNPRESSED}},_changedTouchisObserved:{value:function(e){if(null===this._observedPointer)return!1;for(var t=0,n=e.length;n>t;t++)if(e[t].identifier===this._observedPointer)return t;return!1}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("surrenderPointer",e,t);return void 0!==n&&n===!1?!1:(this._dispatchPressCancel(),!0)}},captureTouchstart:{value:function(e){this._startInteraction(e)}},handleTouchend:{value:function(e){return null===this._observedPointer?(this._endInteraction(e),void 0):(this._changedTouchisObserved(e.changedTouches)!==!1&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?this._dispatchPress(e):e.preventDefault(),this._endInteraction(e)),void 0)}},handleTouchcancel:{value:function(e){(null===this._observedPointer||this._changedTouchisObserved(e.changedTouches)!==!1)&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(e),this._endInteraction(e))}},captureMousedown:{value:function(e){this._startInteraction(e)}},handleClick:{value:function(e){this._interpretInteraction(e)}},handleMouseup:{value:function(e){this._interpretInteraction(e)}},handleDragstart:{value:function(e){this._dispatchPressCancel(e),this._endInteraction()}},_createPressEvent:{enumerable:!1,value:function(e,t){var n,i;return t||(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,null)),n=new s,n.event=t,n.type=e,n.pointer=this._observedPointer,n.targetElement=t.target,t.changedTouches&&(i=this._changedTouchisObserved(t.changedTouches))!==!1&&(n.touch=t.changedTouches[i]),n}},_dispatchPressStart:{enumerable:!1,value:function(e){if(this._state=a.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",e)),this._shouldDispatchLongPress){var t=this;this._longPressTimeout=setTimeout(function(){t._dispatchLongPress()},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this.dispatchEvent(this._createPressEvent("press",e)),this._state=a.UNPRESSED}},_dispatchLongPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(this.dispatchEvent(this._createPressEvent("longPress",e)),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=a.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",e))}}}),s=function(){var e,t,i,a,s,o;for(e=r.specialize({type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch},set:function(e){this._touch=e}}}),t=["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"],i=["clientX","clientY","pageX","pageY","screenX","screenY","target"],a=function(e){return{get:function(){return this._event[e]}}},s=function(e){return{get:function(){return this._touch?this._touch[e]:this._event[e]}}},o=t.length-1;o>=0;o--)n.defineProperty(e,t[o],a(t[o]));for(o=i.length-1;o>=0;o--)n.defineProperty(e,i[o],s(i[o]));return e}()}}),montageDefine("3cbcb4a","core/range-controller",{dependencies:["./core","collections/generic-collection"],factory:function(e,t){var n=e("./core").Montage,i=e("collections/generic-collection"),r=function(e,t){var n=e.clone();n.makeObservable(),n.rangeController=t,n.contentEquals=e&&e.contentEquals||Object.is,Object.defineProperty(n,"clone",{value:function(){return n.slice()}});var i=n.splice;return Object.defineProperty(n,"splice",{configurable:!1,value:function(e,t){var n=this.rangeController.content;this.contentEquals=n&&n.contentEquals||Object.is,e=e>=0?e:this.length+e;var r=this.length,a=Math.min(t,r-e),s=[].slice.call(arguments,2);s.contentEquals=this.contentEquals;var o,l=s.filter(function(t,i){if(n&&!n.has(t))return!1;if(s.findLast(t)>i)return!1;var r=this.find(t);return 0>r||r>=e&&e+a>r},this),c=Math.max(l.length,0),u=c-a,h=Math.max(r+u,e+c);if(!this.rangeController.multiSelect&&h>1){var d=c?l[c-1]:this.one();o=[0,r,d]}else o=this.rangeController.avoidsEmptySelection&&0===h?n.has(this[0])?[1,this.length-1]:[0,this.length,n.one()]:[e,t].concat(l);return i.apply(this,o)}}),n};t.RangeController=n.specialize({constructor:{value:function(e){this.content=null,this._selection=new r([],this),this.sortPath=null,this.filterPath=null,this.visibleIndexes=null,this.reversed=!1,this.start=null,this.length=null,this.selectAddedContent=!1,this.deselectInvisibleContent=!1,this.clearSelectionOnOrderChange=!1,this.avoidsEmptySelection=!1,this.multiSelect=!1,this.organizedContent=[],this.organizedContent.addRangeChangeListener(this,"organizedContent"),this.defineBinding("_orderedContent",{"<-":"content.($filterPath.defined() ? filter{path($filterPath)} : ()).($sortPath.defined() ? sorted{path($sortPath)} : ()).($reversed ?? 0 ? reversed() : ())"}),this.defineBinding("organizedContent.rangeContent()",{"<-":"_orderedContent.($visibleIndexes.defined() ?$visibleIndexes.filter{<$_orderedContent.length}.map{$_orderedContent[()]} : ()).($start.defined() && $length.defined() ?view($start, $length) : ())"}),this.addRangeAtPathChangeListener("content",this,"handleContentRangeChange"),this.addPathChangeListener("sortPath",this,"handleOrderChange"),this.addPathChangeListener("reversed",this,"handleOrderChange"),this.addOwnPropertyChangeListener("multiSelect",this),this.iterations=[],e&&this.initWithContent(e)}},initWithContent:{value:function(e){return this.content=e,this}},sortPath:{value:null},reversed:{value:null},filterPath:{value:null},visibleIndexes:{value:null},start:{value:null},length:{value:null},selectAddedContent:{value:!1},deselectInvisibleContent:{value:!1},clearSelectionOnOrderChange:{value:!1},avoidsEmptySelection:{value:!1},multiSelect:{value:!1},_orderedContent:{value:null},organizedContent:{value:null},iterations:{value:null},_selection:{value:null},selection:{get:function(){return this._selection},set:function(e){var t=[0,this._selection.length];e&&e.toArray&&(t=t.concat(e.toArray())),this._selection.splice.apply(this._selection,t)}},select:{value:function(e){!this.multiSelect&&this.selection.length>=1&&this.selection.clear(),this.selection.add(e)}},deselect:{value:function(e){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection["delete"](e)}},clearSelection:{value:function(){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection.clear()}},add:{value:function(e){var t;return this.content||(this.content=[]),t=this.content.add(e),t&&this.handleAdd(e),t}},push:{value:function(){for(var e=this.content.push.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},pop:{value:function(){return this.content.pop()}},shift:{value:function(){return this.content.shift()}},unshift:{value:function(){for(var e=this.content.unshift.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},splice:{value:function(){for(var e=this.content.splice.apply(this.content,arguments),t=2;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},swap:{value:function(e,t,n){var i=this.content.swap.apply(this.content,arguments);if(n)for(var e=2;n.length>e;e++)this.handleAdd(n[e]);return i}},"delete":{value:function(e){return this.content["delete"](e)}},has:{value:function(e){return this.content?this.content.has(e):!1}},addEach:{value:i.prototype.addEach},deleteEach:{value:i.prototype.deleteEach},clear:{value:function(){this.content.clear()}},addContent:{value:function(){var e=new this.contentConstructor;return this.add(e),e}},_contentConstructor:{value:null},contentConstructor:{get:function(){return this._contentConstructor?this._contentConstructor:this.content&&this.content.contentConstructor?this.content.contentConstructor:Object},set:function(e){this._contentConstructor=e}},handleContentRangeChange:{value:function(e,t){if(this.selection.length>0){var n=this.content&&this.content.contentEquals||Object.is;t.deleteEach(e,n),this.selection&&this.selection.deleteEach(t)}}},handleSelectionRangeChange:{value:function(e,t){if(this.selection)if(this.content){for(var n=[],i=0;e.length>i;i++)this.content.has(e[i])||n.push(e[i]);if(this._selection.deleteEach(n),!this.multiSelect&&this._selection.length>1){var r=this._selection.pop();this._selection.clear(),this._selection.add(r)}this.avoidsEmptySelection&&0==this._selection.length&&this._selection.add(t[0])}else this._selection.clear()}},handleOrganizedContentRangeChange:{value:function(e,t){if(this.deselectInvisibleContent&&this.selection){var n=t.clone(1);n.deleteEach(e),this.selection.deleteEach(t)}}},handleOrderChange:{value:function(){this.clearSelectionOnOrderChange&&this.selection&&this.selection.clear()}},handleAdd:{value:function(e){this.selectAddedContent&&this.selection&&(!this.multiSelect&&this.selection.length>=1&&this.selection.clear(),this.selection.add(e))}},handleMultiSelectChange:{value:function(){if(this.selection){var e=this.selection.length;if(!this.multiSelect&&e>1){var t=this._selection.pop();this._selection.clear(),this._selection.add(t)}}}}},{blueprintModuleId:e("./core")._blueprintModuleIdDescriptor,blueprint:e("./core")._blueprintDescriptor})}}),montageDefine("3cbcb4a","ui/flow.reel/flow-bezier-spline",{dependencies:["../../core/core"],factory:function(e,t){var n=e("../../core/core").Montage,i=t.FlowBezierSpline=n.specialize({constructor:{value:function i(){this._knots=[],this._densities=[]}},knots:{get:function(){return this._knots},set:function(e){this._knots=e}},previousHandlers:{get:function(){return this._previousHandlers||(this._previousHandlers=[]),this._previousHandlers},set:function(e){this._previousHandlers=e}},nextHandlers:{get:function(){return this._nextHandlers||(this._nextHandlers=[]),this._nextHandlers},set:function(e){this._nextHandlers=e}},densities:{get:function(){return this._densities},set:function(e){this._densities=e,this._densitiesLength=this._densities.length,this._maxTime=null}},_parameters:{value:{}},parameters:{get:function(){return this._parameters||(this._parameters={}),this._parameters},set:function(e){this._parameters=e,this._parametersLength=this._parameters.length}},_maxTime:{enumerable:!1,value:null},computeMaxTime:{value:function(){return this._computeDensitySummation(),this._maxTime=this._densitySummation.length?this._densitySummation[this._densitySummation.length-1]:0,this._maxTime}},_densitySummation:{enumerable:!1,value:null},_computeDensitySummation:{enumerable:!1,value:function(){var e,t=this.densities,n=t.length-1,i=0;for(this._densitySummation=[],e=0;n>e;e++)i+=(t[e]+t[e+1])/2,this._densitySummation[e]=i;this._maxTime=null}},_convertSplineTimeToBezierIndexTime:{enumerable:!1,value:function(e){if(0>e)return null;if(null===this._maxTime&&this.computeMaxTime(),e>=this._maxTime)return null;for(var t,n,i,r,a,s=this._densitySummation,o=s.length,l=o-1,c=o>>1;c;)l-c>=0&&s[l-c]>e?l-=c:c>>=1;return t=e-(l?s[l-1]:0),i=this._densities[l],r=this._densities[l+1],a=i-r,n=-1e-10>a||a>1e-10?(i-Math.sqrt(i*i+2*(r-i)*t))/a:t/i,[l,n]}},getPositionAtIndexTime:{value:function(e){var t=e[0],n=e[1],i=this._knots[t],r=this._nextHandlers[t],a=this._previousHandlers[t+1],s=this._knots[t+1],o=1-n,l=o*o*o,c=3*o*o*n,u=3*o*n*n,h=n*n*n;return[i[0]*l+r[0]*c+a[0]*u+s[0]*h,i[1]*l+r[1]*c+a[1]*u+s[1]*h,i[2]*l+r[2]*c+a[2]*u+s[2]*h]}},getRotationAtIndexTime:{value:function(e){var t,n,i,r=e[0],a=e[1],s=1-a,o=this._parameters;return t=void 0!==o.rotateX?o.rotateX.data[r]*s+o.rotateX.data[r+1]*a:0,n=void 0!==o.rotateY?o.rotateY.data[r]*s+o.rotateY.data[r+1]*a:0,i=void 0!==o.rotateZ?o.rotateZ.data[r]*s+o.rotateZ.data[r+1]*a:0,[t,n,i]}},getStyleAtIndexTime:{value:function(e){var t,n,i,r,a,s,o=e[0],l=e[1],c=this._parameters,u=1-l,h="";for(i=Object.keys(c),r=i.length,t=0;r>t;t++)n=i[t],a=c[n],s=a.data,"rotateX"!==n&&"rotateY"!==n&&"rotateZ"!==n&&void 0!==s[o]&&void 0!==s[o+1]&&(h+=n+":"+1e-5*(1e5*(s[o]*u+s[o+1]*l)>>0)+a.units+";");return h}},transformVectorArray:{value:function(e,t){var n,i,r=e.length,a=[];for(i=0;r>i;i++)n=e[i],n&&(a[i]=[n[0]*t[0]+n[1]*t[4]+n[2]*t[8]+t[12],n[0]*t[1]+n[1]*t[5]+n[2]*t[9]+t[13],n[0]*t[2]+n[1]*t[6]+n[2]*t[10]+t[14]]);return a}},transform:{value:function(e){var t=new i;return t._densities=this._densities,t._densitySummation=this._densitySummation,t._knots=this.transformVectorArray(this.knots,e),t._previousHandlers=this.transformVectorArray(this.previousHandlers,e),t._nextHandlers=this.transformVectorArray(this.nextHandlers,e),t}},deCasteljau:{value:function(e,t,n,i,r){var a=1-r,s=a*e[0]+r*t[0],o=a*t[0]+r*n[0],l=a*n[0]+r*i[0],c=a*s+r*o,u=a*o+r*l,h=a*c+r*u,d=a*e[1]+r*t[1],p=a*t[1]+r*n[1],f=a*n[1]+r*i[1],m=a*d+r*p,g=a*p+r*f,v=a*m+r*g,_=a*e[2]+r*t[2],b=a*t[2]+r*n[2],y=a*n[2]+r*i[2],C=a*_+r*b,w=a*b+r*y,L=a*C+r*w;
return[[e,[s,d,_],[c,m,C],[h,v,L]],[[h,v,L],[u,g,w],[l,f,y],i]]}},cubic:{enumerable:!1,value:function(e,t,n,i,r){return((e*r+t)*r+n)*r+i}},cubeRoot:{enumerable:!1,value:function(e){return e>0?Math.pow(e,1/3):-Math.pow(-e,1/3)}},cubicRealRoots:{enumerable:!1,value:function(e,t,n,i){var r=1e-100,a=Math;if(-r>e||e>r){var s=1/e,o=t*s,l=n*s,c=(3*l-o*o)*(1/9),u=(4.5*o*l-13.5*i*s-o*o*o)*(1/27),h=c*c*c+u*u;if(h>r){var d=a.sqrt(h);return[this.cubeRoot(u+d)+this.cubeRoot(u-d)+o*(-1/3)]}if(h>-r){if(-r>u||u>r){var p=this.cubeRoot(u),f=2*p+o*(-1/3),m=o*(-1/3)-p;return m>f?[f,m]:[m,f]}return[o*(-1/3)]}var g=a.acos(u/a.sqrt(-c*c*c))*(1/3),v=a.sqrt(-c),_=1.7320508075688772*v*a.sin(g),b=o*(-1/3);return v*=a.cos(g),[b-v-_,b-v+_,b+2*v]}if(-r>t||t>r){var y=n*n-4*t*i;return y>=0?(y=a.sqrt(y),[(-n-y)/(2*t),(y-n)/(2*t)]):[]}return-r>n||n>r?[-i/n]:[]}},_halfPI:{enumerable:!1,value:.5*Math.PI},reflectionMatrix:{enumerable:!1,value:function(e,t,n,i){var r=Math,a=this._halfPI-r.atan2(t,e),s=r.sin(a),o=r.cos(a),l=this._halfPI-r.atan2(n,e*s+t*o),c=r.sin(l);return i[0]=c*s,i[1]=o*c,i[2]=r.cos(l),i}},reflectedY:{enumerable:!1,value:function(e,t,n,i){return e*i[0]+t*i[1]+n*i[2]}},directedPlaneBezierIntersection:{enumerable:!1,value:function(e,t,n,i,r,a,s,o,l){for(var c,u,h=this.reflectionMatrix(i[0],i[1],i[2],l),d=this.reflectedY(r[0]-e,r[1]-t,r[2]-n,h),p=this.reflectedY(a[0]-e,a[1]-t,a[2]-n,h),f=this.reflectedY(s[0]-e,s[1]-t,s[2]-n,h),m=this.reflectedY(o[0]-e,o[1]-t,o[2]-n,h),g=3*(p-f)+m-d,v=3*(d+f)-6*p,_=3*(p-d),b=this.cubicRealRoots(g,v,_,d),y=0,C=0,w=[];b.length>C&&0>=b[C];)C++;for(;b.length>C&&1>b[C];)c=y,y=b[C],u=.5*(c+y),this.cubic(g,v,_,d,u)>=0&&w.push([c,y]),C++;return u=.5*(y+1),this.cubic(g,v,_,d,u)>=0&&w.push([y,1]),w}}})}}),montageDefine("3cbcb4a","ui/base/abstract-button",{dependencies:["../../core/core","./abstract-control","../../composer/press-composer"],factory:function(e,t){var n=(e("../../core/core").Montage,e("./abstract-control").AbstractControl),i=e("../../composer/press-composer").PressComposer,r=t.AbstractButton=n.specialize({constructor:{value:function r(){if(this.constructor===r)throw Error("AbstractControl cannot be instantiated.");this.super(),this._pressComposer=new i,this.addComposer(this._pressComposer),this._pressComposer.defineBinding("longPressThreshold ",{"<-":"holdThreshold",source:this}),this.defineBinding("classList.has('montage--disabled')",{"<-":"!enabled"}),this.defineBinding("classList.has('montage--active')",{"<-":"active"})}},enabled:{value:!0},_preventFocus:{value:!1},preventFocus:{get:function(){return this._preventFocus},set:function(e){this._preventFocus=!!e,this.needsDraw=!0}},acceptsActiveTarget:{value:function(){return!this._preventFocus}},willBecomeActiveTarget:{value:function(){}},_labelNode:{value:void 0,enumerable:!1},_label:{value:void 0,enumerable:!1},label:{get:function(){return this._label},set:function(e){if(void 0!==e&&this.converter)try{e=this.converter.convert(e),this.error&&(this.error=null)}catch(t){this.error=t}this._label=""+e,this.needsDraw=!0}},holdThreshold:{value:1e3},_pressComposer:{value:null},_active:{value:!1},active:{get:function(){return this._active},set:function(e){this._active=e,this.needsDraw=!0}},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1)}},addEventListener:{value:function(e,t,i){n.addEventListener.call(this,e,t,i),"longAction"===e&&this._pressComposer.addEventListener("longPress",this,!1)}},handlePressStart:{value:function(e){this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1),this._preventFocus||this._element.focus()}},handlePress:{value:function(){this.active=!1,this.dispatchActionEvent(),document.removeEventListener("touchmove",this,!1)}},handleKeyup:{value:function(e){32===e.keyCode&&(this.active=!1,this.dispatchActionEvent())}},handleLongPress:{value:function(){this._pressComposer.cancelPress();var e=document.createEvent("CustomEvent");e.initCustomEvent("longAction",!0,!0,null),this.dispatchEvent(e)}},handlePressCancel:{value:function(){this.active=!1,document.removeEventListener("touchmove",this,!1)}},handleTouchmove:{value:function(e){e.preventDefault()}},isInputElement:{value:!1},enterDocument:{value:function(e){e&&(this.isInputElement="INPUT"===this.originalElement.tagName,this.isInputElement?void 0===this._label&&(this.label=this.originalElement.value):(this.originalElement.firstChild||this.originalElement.appendChild(document.createTextNode("")),this._labelNode=this.originalElement.firstChild,void 0===this._label&&(this.label=this._labelNode.data)),this.element.setAttribute("role","button"),this.element.addEventListener("keyup",this,!1))}},_drawLabel:{enumerable:!1,value:function(e){this.isInputElement?this._element.value=e:this._labelNode&&(this._labelNode.data=e)}},draw:{value:function(){this._elementNeedsTabIndex()&&(this._preventFocus?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex","-1")),this.isInputElement&&(this.element.disabled=!this.enabled),this._drawLabel(this.label)}},_elementNeedsTabIndexRegex:{value:/INPUT|TEXTAREA|A|SELECT|BUTTON|LABEL/},_elementNeedsTabIndex:{value:function(){return null===this.element.tagName.match(this._elementNeedsTabIndexRegex)}}})}}),montageDefine("57e74ee","ui/main.reel/main.html",{text:'<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <title>\n        Main\n    </title>\n    <link rel=stylesheet href=main.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"main"}}},"actionEventListener":{"prototype":"montage/core/event/action-event-listener","properties":{"action":"clearSelection","handler":{"@":"postsController"}},"_dev":{"isHidden":true}},"card":{"prototype":"ui/card.reel","properties":{"element":{"#":"card"}},"bindings":{"post":{"<-":"@flow:iteration.object"}}},"flow":{"prototype":"montage/ui/flow.reel","properties":{"element":{"#":"flow"},"cameraFov":50,"cameraPosition":[-3.949999999998454,-0.2499999999990905,1655.5749999999966],"cameraTargetPoint":[-0.6999999999998181,-10,357.4249999999979],"contentController":{"@":"postsController"},"flowEditorMetadata":{"flowEditorVersion":0.1,"shapes":[{"type":"FlowSpline","name":"Spline 1","pathIndex":0}],"selected":0},"hasElasticScrolling":true,"hasSelectedIndexScrolling":true,"isSelectionEnabled":true,"linearScrollingVector":[-300,0],"paths":[{"knots":[{"previousHandlerPosition":[],"nextDensity":10,"previousDensity":10,"knotPosition":[-761.8749999999984,-270,691.324999999998],"rotateX":0,"rotateY":0,"rotateZ":0,"opacity":1,"nextHandlerPosition":[738.1250000000016,-270,-328.675000000002]},{"knotPosition":[1937.099999999999,-270,-1316.0499999999993],"nextHandlerPosition":[3207.8250000000007,-270,-1461.849999999998],"previousHandlerPosition":[666.3749999999973,-270,-1170.2500000000005],"nextDensity":10,"previousDensity":10,"rotateX":0,"rotateY":0,"rotateZ":0,"opacity":1}],"units":{"rotateX":"","rotateY":"","rotateZ":"","opacity":""},"headOffset":1,"tailOffset":0}],"scrollingTransitionDuration":500,"scrollingTransitionTimingFunction":"ease","scrollVectorX":true,"scrollVectorY":true,"selectedIndexScrollingOffset":0}},"header":{"prototype":"ui/header.reel","properties":{"element":{"#":"header"}},"bindings":{"selectedPost":{"<-":"@postsController.selection.0"}},"listeners":[{"type":"hidePost","useCapture":false,"listener":{"@":"actionEventListener"}}]},"post":{"prototype":"ui/post.reel","properties":{"element":{"#":"post"}},"bindings":{"classList.has(\'Post--revealed\')":{"<-":"@postsController.selection.0"},"post":{"<-":"@postsController.selection.0"}}},"postsController":{"prototype":"montage/core/range-controller","bindings":{"content":{"<-":"@wordpressConnector.posts"}}},"wordpressConnector":{"prototype":"montage-wordpress/core/wordpress-connector","properties":{"categoryFilter":"featured","host":"104.131.138.118","path":"posts"}}}</script>\n</head>\n<body>\n    <div data-montage-id=main class=Main>\n        <header data-montage-id=header></header>\n        <div data-montage-id=post id=blog-post></div>\n        <div data-montage-id=flow class=Flow>\n            <div class="Flow-item js-card">\n                <div class=Flow-item-wrapper>\n                    <div data-montage-id=card></div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n</body></html>'}),montageDefine("57e74ee","ui/logo.reel/logo.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=logo.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"logo"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=logo class=Logo>\n        <svg class=Logo-svg viewbox="0 0 128 128">\n            <g fill-rule=evenodd>\n                <path d="M0,64.3265306 C0,89.7750204 14.7931429,111.79102 36.2527347,122.203429 L5.57191837,38.144 C1.99836735,46.1479184 0,54.9955918 0,64.3265306 L0,64.3265306 Z M107.744653,61.076898 C107.744653,53.1278367 104.881633,47.6186122 102.439184,43.3371429 C99.179102,38.0342857 96.128,33.5542857 96.128,28.2488163 C96.128,22.3346939 100.597551,16.8359184 106.929633,16.8359184 C107.203918,16.8359184 107.480816,16.8724898 107.755102,16.8907755 C96.3160816,6.40783673 81.0710204,0 64.3265306,0 C41.8481633,0 22.0813061,11.5356735 10.5848163,28.9959184 C12.0973061,29.0429388 13.5131429,29.076898 14.72,29.076898 C21.4517551,29.076898 31.8641633,28.2514286 31.8641633,28.2514286 C35.3227755,28.0581224 35.732898,33.1389388 32.266449,33.556898 C32.266449,33.556898 28.7869388,33.9591837 24.9077551,34.1681633 L48.3343673,103.83151 L62.4117551,61.6228571 L52.3859592,34.1681633 C48.9221224,33.9591837 45.6411429,33.556898 45.6411429,33.556898 C42.1720816,33.3479184 42.5848163,28.0581224 46.0538776,28.2514286 C46.0538776,28.2514286 56.6700408,29.076898 62.986449,29.076898 C69.7103673,29.076898 80.138449,28.2514286 80.138449,28.2514286 C83.5918367,28.0581224 84.0045714,33.1389388 80.5355102,33.556898 C80.5355102,33.556898 77.0612245,33.9591837 73.1794286,34.1681633 L96.4284082,103.301224 L102.846694,81.8729796 C106.106776,73.5111837 107.744653,66.5887347 107.744653,61.076898 L107.744653,61.076898 Z M65.4524082,69.9559184 L46.1505306,126.038204 C51.9105306,127.730939 57.9970612,128.650449 64.3239184,128.650449 C71.808,128.650449 78.996898,127.354776 85.6816327,124.998531 C85.5092245,124.724245 85.3498776,124.436898 85.2218776,124.120816 L65.4524082,69.9559184 L65.4524082,69.9559184 Z M120.758857,33.4602449 C121.043592,35.5160816 121.202939,37.7103673 121.202939,40.0822857 C121.202939,46.6050612 119.977796,53.9402449 116.30498,63.1196735 L96.660898,119.915102 C115.777306,108.771265 128.634776,88.0587755 128.634776,64.3291429 C128.637388,53.1382857 125.779592,42.6292245 120.758857,33.4602449 L120.758857,33.4602449 Z"></path>\n            </g>\n        </svg>\n    </div>\n\n\n</body></html>'}),montageDefine("3cbcb4a","ui/flow.reel/flow.html",{text:'<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=flow.css>\n    <script type=text/montage-serialization>{"repetition":{"prototype":"ui/repetition.reel","properties":{"element":{"#":"montage-flow-repetition"},"contentController":{"@":"frustumController"}},"bindings":{"isSelectionEnabled":{"<-":"@owner.isSelectionEnabled"}}},"frustumController":{"prototype":"core/range-controller","bindings":{"content":{"<-":"@owner.contentController.organizedContent ?? @owner.content"},"selection.0":{"<->":"@owner.contentController.selection.0"},"visibleIndexes":{"<-":"@owner._visibleIndexes"}}},"flowTranslateComposer":{"prototype":"ui/flow.reel/flow-translate-composer","properties":{"flow":{"@":"owner"},"invertAxis":true,"allowFloats":true,"minScroll":0},"bindings":{"maxScroll":{"<-":"@owner.length"},"_momentumDuration":{"<-":"@owner.momentumDuration"},"translateStride":{"<-":"@owner.stride"},"scrollingMode":{"<-":"@owner.scrollingMode"},"linearScrollingVector":{"<-":"@owner.linearScrollingVector"},"isLimitedToSingleStride":{"<-":"@owner.isLimitedToSingleStride"},"delegate":{"<-":"@owner"}}},"slot":{"prototype":"ui/slot.reel","properties":{"element":{"#":"montage-flow-slot"}},"bindings":{"content":{"<->":"@owner.slotContent"}}},"owner":{"properties":{"element":{"#":"montage-flow"},"_repetition":{"@":"repetition"},"_flowTranslateComposer":{"@":"flowTranslateComposer"},"_cameraElement":{"#":"montage-flow-camera"},"_frustumController":{"@":"frustumController"}},"bindings":{"scroll":{"<->":"@flowTranslateComposer.scroll"},"selection":{"<->":"@frustumController.selection"},"selectedIndexes":{"<-":"@repetition.selectedIndexes"},"activeIndexes":{"<-":"@repetition.activeIndexes"},"draggedSlideIndex":{"<-":"@flowTranslateComposer._closerIndex"}}},":iteration":{"alias":"@repetition:iteration"}}</script>\n</head>\n<body>\n    <div data-montage-id=montage-flow class=montage-Flow>\n        <div data-montage-id=montage-flow-camera class=montage-Flow-camera>\n            <div data-montage-id=montage-flow-repetition class=montage-Flow-Repetition>\n                <div data-montage-id=wrapper>\n                    <div data-param=*></div>\n                </div>\n            </div>\n            <div data-montage-id=montage-flow-slot class=montage-Flow-Slot></div>\n        </div>\n    </div>\n\n\n</body></html>'}),montageDefine("3cbcb4a","ui/base/abstract-image",{dependencies:["../../core/core","../component","../../core/mini-url"],factory:function(e,t){var n=(e("../../core/core").Montage,e("../component").Component),i=e("../../core/mini-url"),r=t.AbstractImage=n.specialize({constructor:{value:function r(){if(this.constructor===r)throw Error("AbstractImage cannot be instantiated.");n.constructor.call(this),this._image=new Image,this._image.onload=this.handleImageLoad.bind(this),this.addPathChangeListener("_ownerDocumentPart",this,"_rebaseSrc")}},emptyImageSrc:{value:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="},_isLoadingImage:{value:!1},_image:{value:null},_src:{value:null},src:{set:function(e){this._src!==e&&(this._src=e,e=this._getRebasedSrc(),e?(this._isInvalidSrc=!1,this._loadImage(e)):this._isInvalidSrc=!0,this.needsDraw=!0)},get:function(){return this._src}},_loadImage:{value:function(e){this._image.src=e,this._isLoadingImage=!this._image.complete}},_isInvalidSrc:{value:!0},width:{value:null},height:{value:null},_textAlternative:{value:null},textAlternative:{set:function(e){this._textAlternative=e,this.needsDraw=!0},get:function(){return this._textAlternative}},_crossOrigin:{value:null},crossOrigin:{set:function(e){e!==this._crossOrigin&&(this._crossOrigin=e,this.needsDraw=!0)},get:function(){return this._crossOrigin}},_rebaseSrc:{value:function(){var e;e=this._getRebasedSrc(),e&&(this._isInvalidSrc=!1,this._loadImage(e),this.needsDraw=!0)}},_getRebasedSrc:{value:function(){var e,t=this._src,n=/^[\w\-]+:|^\//;if(t){if(n.test(t))return t;if(this._ownerDocumentPart&&(e=this._ownerDocumentPart.template.getBaseUrl()))return i.resolve(e,t)}return null}},enterDocument:{value:function(e){e&&this.element.setAttribute("role","img")}},draw:{value:function(){var e;e=this._isLoadingImage||this._isInvalidSrc?this.emptyImageSrc:this._getRebasedSrc(),null==this._crossOrigin||"data:"===e.slice(0,5)?this.element.removeAttribute("crossorigin"):this.element.setAttribute("crossorigin",this._crossOrigin),this.element.src=e,this.element.setAttribute("aria-label",this._textAlternative)}},handleImageLoad:{value:function(){this._isLoadingImage=!1,this.needsDraw=!0}}})}}),montageDefine("57e74ee","ui/post.reel/post.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel=stylesheet type=text/css>\n    <link href="//fonts.googleapis.com/css?family=Bitter:300,400,700" rel=stylesheet type=text/css>\n    <link rel=stylesheet type=text/css href=post.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}}},"postContent":{"prototype":"ui/html","properties":{"element":{"#":"postContent"},"value":"Text"},"bindings":{"value":{"<-":"@owner.post.content"}}},"postHeading":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"postHeading"},"value":"Text"},"bindings":{"value":{"<-":"@owner.post.title"}}},"postImage":{"prototype":"digit/ui/image.reel","properties":{"element":{"#":"postImage"},"crossOrigin":null},"bindings":{"src":{"<-":"@owner.post.featured_image.source"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=owner class=Post>\n        <div class=Post-imageWrapper>\n            <img data-montage-id=postImage class=Post-image src=sample.jpg>\n        </div>\n        <div class=Post-content>\n            <h1 class=Post-heading data-montage-id=postHeading>A trip to Santa Cruz</h1>\n            <div class=Post-copy data-montage-id=postContent>\n                <p>Or a guy who burns down a bar for the insurance money! Bender, being God isn\'t easy. If you do too much, people get dependent on you, and if you do nothing, they lose hope. You have to use a light touch. Like a safecracker, or a pickpocket. I could if you hadn\'t turned on the light and shut off my stereo. You don\'t know how to do any of those. I barely knew Philip, but as a clergyman I have no problem telling his most intimate friends all about him. Who am I making this out to?</p>\n            </div>\n        </div>\n    </div>\n\n\n</body></html>'}),montageDefine("3cbcb4a","ui/slot.reel/slot",{dependencies:["../../core/core","../component"],factory:function(e,t){var n=(e("../../core/core").Montage,e("../component").Component);t.Slot=n.specialize({hasTemplate:{enumerable:!1,value:!1},constructor:{value:function(){this.super(),this.content=null}},delegate:{value:null},_content:{value:null},enterDocument:{value:function(e){e&&this.element.classList.add("montage-Slot")}},content:{get:function(){return this._content},set:function(e){var t,i;e&&void 0!==e.needsDraw?(i=this._content,i&&void 0!==i.needsDraw&&i.detachFromParentComponent(),e.element?t=e.element:(t=document.createElement("div"),t.id="appendDiv",this.delegate&&"function"==typeof this.delegate.slotElementForComponent&&(t=this.delegate.slotElementForComponent(this,e,t)),e.element=t),Object.getPropertyDescriptor(n,"domContent").set.call(this,t),this.addChildComponent(e),e.needsDraw=!0):Object.getPropertyDescriptor(n,"domContent").set.call(this,e),this._content=e,this.needsDraw=!0}},contentDidChange:{value:function(e,t){this.delegate&&"function"==typeof this.delegate.slotDidSwitchContent&&this.delegate.slotDidSwitchContent(this,e,e?e.component:null,t,t?t.component:null)}}})}}),montageDefine("256bd30","core/wordpress-connector",{dependencies:["montage/core/core","reqwest","montage"],factory:function(e,t){var n=e("montage/core/core").Montage,i=e("reqwest");t.WordpressConnector=n.specialize({constructor:{value:function(){this.addPathChangeListener("host",this,"_makeRequest"),this.addPathChangeListener("path",this,"_makeRequest"),this.addPathChangeListener("categoryFilter",this,"_makeRequest")}},host:{value:null},path:{value:null},categoryFilter:{value:null},posts:{value:null},_latestRequest:{value:null},_makeRequest:{value:function(){if(this.host&&this.path){var e,t,n="http://"+this.host+"/wp-json/"+this.path+"?_jsonp=cb",r=this;this.categoryFilter&&(t={"filter[category_name]":this.categoryFilter},n+="&"+i.toQueryString(t)),e=this._latestRequest=i({url:n,type:"jsonp",method:"get",jsonpCallback:"_jsonp",jsonpCallbackName:"cb"}).then(function(t){e===r._latestRequest&&(r.posts=t)})}}}},{blueprintModuleId:e("montage")._blueprintModuleIdDescriptor,blueprint:e("montage")._blueprintDescriptor})}}),montageDefine("57e74ee","ui/card.reel/card.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=card.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}}},"image":{"prototype":"digit/ui/image.reel","properties":{"element":{"#":"image"},"crossOrigin":null},"bindings":{"src":{"<-":"@owner.post.featured_image.source"}}},"text1":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"text1"},"value":"Text"},"bindings":{"value":{"<-":"@owner.post.title"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=owner class=Card>\n        <div class="Card-face Card-face--front">\n            <img data-montage-id=image class=Card-image>\n            <div class=Card-caption>\n                <p data-montage-id=text1 class=Card-title></p>\n            </div>\n        </div>\n        <div class="Card-face Card-face--back">\n            <p></p>\n        </div>\n    </div>\n\n\n\n\n</body></html>'}),montageDefine("3cbcb4a","composer/composer",{dependencies:["../core/core","../core/target"],factory:function(e,t){var n=(e("../core/core").Montage,e("../core/target").Target);t.Composer=n.specialize({_component:{value:null},component:{get:function(){return this._component},set:function(e){this._component=e}},_element:{value:null},element:{get:function(){return this._element},set:function(e){this._element=e}},lazyLoad:{value:!1},_needsFrame:{value:!1},needsFrame:{set:function(e){this._needsFrame!==e&&(this._needsFrame=e,this._component&&e&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:function(){}},_resolveDefaults:{value:function(){null==this.element&&null!=this.component&&(this.element=this.component.element)}},_load:{value:function(){this.element||this._resolveDefaults(),this.load()}},load:{value:function(){}},unload:{value:function(){}},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}})}}),montageDefine("a65aff3","package.json",{exports:{name:"reqwest",description:"A wrapper for asynchronous http requests",keywords:["ender","ajax","xhr","connection","web 2.0","async","sync"],version:"1.1.0",homepage:"https://github.com/ded/reqwest",author:{name:"Dustin Diaz",email:"dustin@dustindiaz.com",url:"http://dustindiaz.com"},repository:{type:"git",url:"https://github.com/ded/reqwest.git"},main:"./reqwest.js",ender:"./src/ender.js",devDependencies:{connect:"1.8.x",mime:"1.x.x","sink-test":">=0.1.2",dispatch:"0.x.x",valentine:">=1.4.7",smoosh:"0.4.0","delayed-stream":"0.0.5",bump:"0.2.3"},scripts:{boosh:"smoosh make ./build.json",test:"node ./test.js"},readmeFilename:"README.md",bugs:{url:"https://github.com/ded/reqwest/issues"},_id:"reqwest@1.1.0",dist:{shasum:"2dd6973db5b611af4a1dc082f50e330a1aaf3f90"},_from:"reqwest@",_resolved:"https://registry.npmjs.org/reqwest/-/reqwest-1.1.0.tgz",hash:"a65aff3",mappings:{},production:!0,useScriptInjection:!0}}),montageDefine("57e74ee","ui/header.reel/header.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=header.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}}},"closeButton":{"prototype":"digit/ui/button.reel","properties":{"element":{"#":"closeButton"},"label":""},"bindings":{"classList.has(\'is-hidden\')":{"<-":"!@owner.selectedPost"}},"listeners":[{"type":"action","listener":{"@":"owner"}}]},"logo":{"prototype":"ui/logo.reel","properties":{"element":{"#":"logo"}}},"title":{"prototype":"digit/ui/title.reel","properties":{"element":{"#":"title"},"value":"Ryan\'s Blog"}}}</script>\n</head>\n<body>\n    <header data-montage-id=owner class=Header>\n        <div data-montage-id=logo></div>\n        <h1 data-montage-id=title></h1>\n        <button data-montage-id=closeButton class=Header-closeButton></button>\n    </header>\n\n\n</body></html>'}),montageDefine("3cbcb4a","ui/text.reel/text",{dependencies:["../component"],factory:function(e,t){var n=e("../component").Component;t.Text=n.specialize({constructor:{value:function(){this.super()}},hasTemplate:{value:!1},_value:{value:null},value:{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.needsDraw=!0)}},converter:{value:null},defaultValue:{value:""},_valueNode:{value:null},_RANGE:{value:document.createRange()},enterDocument:{value:function(e){if(e){var t=this._RANGE;t.selectNodeContents(this.element),t.deleteContents(),this._valueNode=document.createTextNode(""),t.insertNode(this._valueNode),this.element.classList.add("montage-Text")}}},draw:{value:function(){var e=this._value,t=e||0===e?e:this.defaultValue;this.converter&&(t=this.converter.convert(t)),this._valueNode.data=t}}})}}),montageDefine("73c951f","package.json",{exports:{name:"digit",version:"0.5.1",repository:{type:"git",url:"https://github.com/montagejs/digit.git"},dependencies:{montage:"~0.14.0",matte:"~0.2.0"},devDependencies:{"montage-testing":"~0.4.0"},exclude:["overview.html","overview","run-tests.html","test"],readmeFilename:"README.md",description:"![digit](overview/assets/images/icon.png)",bugs:{url:"https://github.com/montagejs/digit/issues"},homepage:"https://github.com/montagejs/digit",_id:"digit@0.5.1",_from:"digit@~0.5.0",hash:"73c951f",mappings:{montage:{name:"montage",hash:"3cbcb4a",location:"../montage@3cbcb4a/"},matte:{name:"matte",hash:"ce58aac",location:"../matte@ce58aac/"}},production:!0,useScriptInjection:!0}}),montageDefine("3cbcb4a","core/event/action-event-listener",{dependencies:["../core"],factory:function(e,t){var n=e("../core").Montage;t.ActionEventListener=n.specialize({handler:{value:null},action:{value:null},initWithHandler_action_:{value:function(e,t){return this.handler=e,this.action=t,this}},handleEvent:{value:function(e){if("function"==typeof this.action){var t=this.handler?this.handler:this;this.action.call(t,e)}else this.handler&&this.action&&this.handler[this.action](e)}},serializeProperties:{value:function(e){e.set("handler",this.handler,"reference"),e.set("action",this.action)}}},{blueprintModuleId:e("../core")._blueprintModuleIdDescriptor,blueprint:e("../core")._blueprintDescriptor})}}),montageDefine("3cbcb4a","core/browser",{dependencies:["montage"],factory:function(e,t){var n=e("montage").Montage,i=RegExp(/AppleWebKit\/([\d.]+)/),r=n.specialize({constructor:{value:function r(e){this.super(),this._userAgent=e,this._analyze(e)}},_analyze:{value:function(e){if(e.indexOf("Android")>-1&&e.indexOf("Mozilla/5.0")>-1&&e.indexOf("AppleWebKit")>-1){this.android={};var t=i.exec(e),n=null===t?null:parseFloat(i.exec(e)[1]);this.android.androidBrowser=null!==n&&537>n}}},_userAgent:{value:null}}),a=null;n.defineProperties(t,{browser:{get:function(){return null===a&&(a=new r(navigator.userAgent)),a}},Browser:{value:r}})}}),montageDefine("3cbcb4a","ui/base/abstract-control",{dependencies:["../../core/core","../component","collections/dict"],factory:function(e,t){var n=(e("../../core/core").Montage,e("../component").Component),i=e("collections/dict");t.AbstractControl=n.specialize({dispatchActionEvent:{value:function(){return this.dispatchEvent(this.createActionEvent())}},_detail:{value:null},detail:{get:function(){return null==this._detail&&(this._detail=new i),this._detail}},createActionEvent:{value:function(){var e,t=document.createEvent("CustomEvent");return e=this._detail,t.initCustomEvent("action",!0,!0,e),t}}})}}),montageDefine("57e74ee","ui/html",{dependencies:["montage","montage/ui/component"],factory:function(e,t){var n=e("montage").Montage,i=e("montage/ui/component").Component;t.Html=n.create(i,{hasTemplate:{value:!1},constructor:{value:function(){this.super(),this.value=null,this.addOwnPropertyChangeListener("value",this)}},canDraw:{value:function(){return null!==this.value}},handleValueChange:{value:function(){this.needsDraw=!0}},iteration:{value:null},value:{value:""},object:{value:null},draw:{value:function(){this.element.innerHTML=this.value}}})}}),montageDefine("73c951f","ui/image.reel/image.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=image.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"image"}}}}</script>\n</head>\n<body>\n    <img data-montage-id=image class=digit-Image>\n\n\n</body></html>'}),montageDefine("256bd30","package.json",{exports:{name:"montage-wordpress",version:"0.1.0",dependencies:{montage:"~0.14.0",reqwest:"1.1.0"},hash:"256bd30",mappings:{montage:{name:"montage",hash:"3cbcb4a",location:"../montage@3cbcb4a/"},reqwest:{name:"reqwest",hash:"a65aff3",location:"../reqwest@a65aff3/"}},production:!0,useScriptInjection:!0}}),montageDefine("57e74ee","ui/header.reel/header",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Header=n.specialize({constructor:{value:function(){this.super()}},handleCloseButtonAction:{value:function(){this.dispatchEventNamed("hidePost",!0,!0)}}})}}),montageDefine("73c951f","ui/button.reel/button",{dependencies:["montage/ui/base/abstract-button"],factory:function(e,t){var n=e("montage/ui/base/abstract-button").AbstractButton;t.Button=n.specialize({hasTemplate:{value:!0},constructor:{value:function(){this.super(),this.classList.add("digit-Button")}}})}}),montageDefine("73c951f","ui/title.reel/title",{dependencies:["montage/ui/text.reel"],factory:function(e,t){var n=e("montage/ui/text.reel").Text;t.Title=n.specialize({hasTemplate:{value:!0},constructor:{value:function(){this.super(),this.classList.add("digit-Title")}}})}}),montageDefine("57e74ee","ui/post.reel/post",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Post=n.specialize({constructor:{value:function(){this.super()}}})}}),montageDefine("57e74ee","ui/main.reel/main",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Main=n.specialize({constructor:{value:function(){this.super()}}})}}),montageDefine("57e74ee","ui/logo.reel/logo",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Logo=n.specialize({constructor:{value:function(){this.super()}}})}}),montageDefine("57e74ee","ui/card.reel/card",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Card=n.specialize({constructor:{value:function(){this.super()}}})}}),montageDefine("73c951f","ui/title.reel/title.html",{text:"<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=title.css>\n</head>\n<body>\n\n\n</body></html>"}),montageDefine("73c951f","ui/image.reel/image",{dependencies:["montage/ui/base/abstract-image"],factory:function(e,t){var n=e("montage/ui/base/abstract-image").AbstractImage;t.Image=n.specialize({})}}),montageDefine("73c951f","ui/button.reel/button.html",{text:"<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=button.css>\n</head>\n<body>\n\n\n</body></html>"});
bundleLoaded("index.html.bundle-1-0.js")