montageDefine("a65aff3","make/tests",{dependencies:["child_process","fs","connect","dispatch","mime","delayed-stream"],factory:function(e){var t=(e("child_process").exec,e("fs")),n=e("connect"),i=e("dispatch"),r=e("mime"),a=e("delayed-stream"),s=function(e){return r.lookup("jsonp"==e?"js":e)},o={"/":function(e,n){n.write(t.readFileSync("./tests/tests.html","utf8")),n.end()},"/tests/timeout$":function(e,t){var n=a.create(e);setTimeout(function(){t.writeHead(200,{Expires:0,"Cache-Control":"max-age=0, no-cache, no-store"}),e.query.callback&&t.write(e.query.callback+"("),t.write(JSON.stringify({method:e.method,query:e.query,headers:e.headers})),e.query.callback&&t.write(");"),n.pipe(t)},2e3)},"(([\\w\\-\\/\\.]+)\\.(css|js|json|jsonp|html|xml)$)":function(e,n,i,r,a,o){n.writeHead(200,{Expires:0,"Cache-Control":"max-age=0, no-cache, no-store","Content-Type":s(o)}),void 0!==e.query.echo?("jsonp"==o&&n.write((e.query.callback||e.query.testCallback||"echoCallback")+"("),n.write(JSON.stringify({method:e.method,query:e.query,headers:e.headers})),"jsonp"==o&&n.write(");")):n.write(t.readFileSync("./"+a+"."+o)),n.end()}};n.createServer(n.query(),i(o)).listen(1234);var l={"/get-value":function(e,t){t.writeHead(200,{"Access-Control-Allow-Origin":e.headers.origin,"Content-Type":"text/plain"}),t.end("hello")},"/set-cookie":function(e,t){t.writeHead(200,{"Access-Control-Allow-Origin":e.headers.origin,"Access-Control-Allow-Credentials":"true","Content-Type":"text/plain","Set-Cookie":"cookie=hello"}),t.end("Set a cookie!")},"/get-cookie-value":function(e,t){var n,i={};e.headers.cookie&&e.headers.cookie.split(";").forEach(function(e){var t=e.split("=");i[t[0].trim()]=(t[1]||"").trim()}),n=i.cookie,t.writeHead(200,{"Access-Control-Allow-Origin":e.headers.origin,"Access-Control-Allow-Credentials":"true","Content-Type":"text/plain"}),t.end(n)}};n.createServer(n.query(),i(l)).listen(5678)}});